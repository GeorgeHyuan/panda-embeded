(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e0733b04"],{"06c5":function(e,t,n){"use strict";t["a"]={data:function(){return{cardShowMax:!1}},methods:{handleShowMax:function(e){this.cardShowMax=e}}}},1627:function(e,t,n){},2692:function(e,t,n){"use strict";n("1627")},"34d1":function(e,t,n){},"63d9":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("d2-card",{staticClass:"box-card",on:{handleShowMax:e.handleShowMax}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("i",{staticClass:"fa fa-hourglass-2"}),n("span",[e._v("巡检结果")])]),e.data.length?n("el-carousel",{ref:"carousel",attrs:{trigger:"click",height:e.cardShowMax?"calc(100vh - 40px)":"322px","indicator-position":"none",interval:5e3},on:{change:e.handleChange}},e._l(e.data,(function(t,a){return n("el-carousel-item",{key:a},[n("div",{staticClass:"video-block",on:{dblclick:function(t){return e.dbVideoClick(a)}}},[n("canvasImg",{attrs:{picUrl:t.resultPic||"",fontSize:"16",resultMark:t.resultMark?JSON.parse(t.resultMark):[]}})],1)])})),1):n("noData",{style:{height:"290px"}})],1)},c=[],o=n("cbe7"),r=n("d6a8"),i=n("8e01"),s=n("f5b2"),u=n("06c5"),l={name:"app-manage",components:{canvasImg:r["a"],noData:i["a"]},props:{carouselImgData:{type:Array}},mixins:[u["a"]],data:function(){return{data:[],videoData:[],playerArr:[],taskId:"",isClose:!0,isBig:!1,times:setInterval((function(){}),2e3)}},computed:{},watch:{carouselImgData:{deep:!0,handler:function(e,t){var n=this;this.data=[],this.$nextTick((function(){n.carouselImgData.map((function(e){e.resultPic&&n.data.push(e)}))}))}}},created:function(){},mounted:function(){var e=this;window.onresize=function(){e.isClose=!e.isClose,e.isBig=!e.isBig}},methods:{getTaskId:function(e){this.taskId},getappList:function(){var e=this;this.loading=!0;var t={recordsId:this.taskId,descList:["1","2","3"]};this.data=[],o["a"].getRecordItemList(t).then((function(t){t.data.map((function(t){t.resultPic&&e.data.push(t)}))})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1}))},playerVideo:function(){var e=this;this.clearAll(),this.videoData=[],this.playerArr=[];var t=0;this.data.map((function(n,a){var c={};n.rawBasicVo.map((function(e){"devNum"===e.url?c.devNum=e.name:"channelNum"===e.url?c.channelNum=e.name:"id"===e.url?(c.id=e.name,c.nodeId=e.name):"name"===e.url&&(c.name=e.name)})),c.live=c.channelNum+"@"+c.devNum,c.addrSrc="webrtc://".concat(serverIp_app_live,"/live/").concat(c.devNum,"@").concat(c.channelNum),e.videoData.indexOf(c.addrSrc)>-1||(e.videoData.push(c.addrSrc),e.videoData.length-1<3&&e.videoPlayer(e.videoData.length-1,c.addrSrc),"2"===n.desc&&(t=e.videoData.length-1))})),this.$nextTick((function(){setTimeout((function(){e.$refs.carousel.setActiveItem(t)}),0)}))},videoPlayer:function(e,t){var n=this;-1===this.playerArr.indexOf(t)&&(this.playerArr.push(t),setTimeout((function(){n.$refs["player"+e][0].playerInitWatchCarousel(n.videoData[e])}),0))},handleChange:function(e){},dbVideoClick:function(e){var t=document.getElementsByClassName("video-block")[e];this.isClose?Object(s["a"])(t):Object(s["b"])(t)},clearAll:function(){var e=this;this.videoData.map((function(t,n){e.$refs["player"+n][0].clearRtc()}))}},beforeDestroy:function(){this.clearAll(),clearInterval(this.times)}},d=l,m=(n("2692"),n("2877")),f=Object(m["a"])(d,a,c,!1,null,"2870d057",null);t["default"]=f.exports},"8e01":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[1===e.flag?"no-data2":2===e.flag?"no-data3":3===e.flag?"no-data4":4===e.flag?"no-data5":5===e.flag?"no-data6":6===e.flag?"no-data7":"no-data"]},[e._v("\n  暂无数据\n")])},c=[],o={props:{flag:Number}},r=o,i=(n("bd36"),n("2877")),s=Object(i["a"])(r,a,c,!1,null,null,null);t["a"]=s.exports},bd36:function(e,t,n){"use strict";n("34d1")},cbe7:function(e,t,n){"use strict";var a=n("9bd2"),c=VUE_APP_API_STATION;t["a"]={getRecordList:function(e){return Object(a["a"])({url:"".concat(c,"/inspection/record/getRecordList"),method:"post",data:e})},getRecordItemPage:function(e){return Object(a["a"])({url:"".concat(c,"/evt/list/").concat(e.current,"/").concat(e.size),method:"get"})},getRecordItemList:function(e){return Object(a["a"])({url:"".concat(c,"/inspection/recordItem/getRecordItemList"),method:"post",data:e})},getRecordExecutorPage:function(e){return Object(a["a"])({url:"".concat(c,"/inspection/recordExecutor/getRecordExecutorPage"),method:"post",data:e})},getRecordById:function(e){return Object(a["a"])({url:"".concat(c,"/inspection/record/getRecordById/").concat(e),method:"post"})},getModelCount:function(e){return Object(a["a"])({url:"".concat(c,"/getModelCount"),method:"get"})},getEvtCount:function(e){return Object(a["a"])({url:"".concat(c,"/evt/getEvtCount"),method:"get"})},getRealHumTmp:function(){return Object(a["a"])({url:"".concat(c,"/real/getRealHumTmp"),method:"get"})}}},f5b2:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var a=function(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},c=function(e){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}}}]);