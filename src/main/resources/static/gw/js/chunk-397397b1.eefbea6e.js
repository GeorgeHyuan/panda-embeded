(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-397397b1"],{"570b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tree",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:e.devId,ref:"tree",attrs:{load:e.loadNode,props:e.defaultProps,lazy:"","node-key":"id","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","default-expand-all":!1,"expand-on-click-node":!1,"render-content":e.renderContent,"highlight-current":!0},on:{"node-click":e.handleNodeClick}},"el-tree",e.$attrs,!1))},o=[],r=n("2f62"),c=n("e1e5");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={name:"config-tree",components:{},computed:d(d({},Object(r["c"])("d2admin",{treeNode:"tree/treeNode"})),{},{devId:function(){return this.treeNode.id},treeType:function(){return this.$route.meta.treeType}}),data:function(){return{activeName:"1",loading:!1,defaultProps:{children:"children",label:"name",id:"id",isLeaf:"leaf"},MouseEvent:null,Node:{},Nodes:null,node:null}},watch:{},methods:{handleNodeClick:function(e,t,n){if(e.hasChild||e.icon){if(!this.Node)return t.isCurrent=!1,!1;var a=this.Node.id;this.$refs.tree.setCurrentKey(a);var o=this.$refs.tree.getCurrentNode();this.Node=o}else this.Node=e,this.Nodes=t,this.MouseEvent=n.$el.childNodes[0].childNodes[0],e.treetype=this.treeType||"12",this.$store.dispatch("d2admin/tree/setDevTreeNode",e)},renderContent:function(e,t){var n=t.node,a=t.data;t.store;return e("span",{class:"custom-tree-node",attrs:{id:"node"+a.id}},[e("span",[e("i",{class:a.icon?"treeIcon "+a.icon:""}),n.label])])},loadNode:function(e,t){var n=this;0===e.level?this.devId&&c["a"].nodeGetById(this.devId).then((function(e){var a=n.hasChild([e.data]);return t(a)})):this.$nextTick((function(){c["a"].getCameraPoint({id:e.data.id}).then((function(a){var o=a.data.spaceDgtVos||[],r=a.data.spaceAnalogVos||[],c=a.data.spaceVoList||[],i=o.concat(r).concat(c),d=n.hasChild(i);return e.childNodes=null,e.data.children=null,t(d)})).finally((function(){n.loading=!1}))}))},hasChild:function(e){return e&&0!==e.length?(e.forEach((function(t,n){e[n].leaf=!e[n].hasChild})),e):[]}}},u=l,p=n("2877"),h=Object(p["a"])(u,a,o,!1,null,"088451b3",null);t["default"]=h.exports},e1e5:function(e,t,n){"use strict";var a=n("9bd2"),o=VUE_APP_API,r=VUE_APP_API_STATION;t["a"]={nodeGetById:function(e){return Object(a["a"])({url:"".concat(o,"/device/space/getById/").concat(e),method:"get"})},deleteInspectTaskById:function(e){return Object(a["a"])({url:"".concat(r,"/inspection/task/deleteInspectTaskById/").concat(e),method:"delete"})},saveInspectTask:function(e){return Object(a["a"])({url:"".concat(r,"/inspection/task/saveInspectTask"),method:"post",data:e})},updateInspectTask:function(e){return Object(a["a"])({url:"".concat(r,"/inspection/task/updateInspectTask"),method:"put",data:e})},getPageInspectTask:function(e){return Object(a["a"])({url:"".concat(r,"/inspection/task/getPageInspectTask"),method:"post",data:e})},getInspectTaskById:function(e){return Object(a["a"])({url:"".concat(r,"/inspection/task/getInspectTaskById"),method:"post",data:e})},startTask:function(e){return Object(a["a"])({url:"".concat(r,"/inspection/record/startTask"),method:"post",data:e})},getCameraPoint:function(e){return Object(a["a"])({url:"".concat(o,"/device/space/getInspectionPointById"),method:"post",params:e})},getCameraPointType:function(e){return Object(a["a"])({url:"".concat(o,"/device/space/getInspectionPointById?id=").concat(e.id,"&nodeTypeList=").concat(e.nodeTypeList[0],"&nodeTypeList=").concat(e.nodeTypeList[1]),method:"post"})},getCalendar:function(e){return Object(a["a"])({url:"".concat(r,"/inspection/task/getCalendar"),method:"post",data:e})},getYear:function(e){return Object(a["a"])({url:"".concat(r,"/inspection/task/getYear"),method:"post",data:e})}}}}]);