(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7dbba7ae","chunk-eb3d6992"],{"0f8c":function(t,e,a){},1224:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"control"},[a("div",{staticClass:"direction"},[a("i",{staticClass:"el-icon-caret-top up btn",on:{mousedown:function(e){return t.handleStart("UP")},mouseup:function(e){return t.handleStop("up")}}}),a("i",{staticClass:"el-icon-caret-bottom bottom btn",on:{mousedown:function(e){return t.handleStart("DOWN")},mouseup:function(e){return t.handleStop("down")}}}),a("i",{staticClass:"el-icon-caret-left left btn",on:{mousedown:function(e){return t.handleStart("LEFT")},mouseup:function(e){return t.handleStop("left")}}}),a("i",{staticClass:"el-icon-caret-right right btn",on:{mousedown:function(e){return t.handleStart("RIGHT")},mouseup:function(e){return t.handleStop("right")}}}),a("span",{staticClass:"center-ok"})]),a("div",{staticClass:"zoom"},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("步长")]),a("el-slider",{staticClass:"block-slider",attrs:{min:1,max:8,"show-input":""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("聚焦")]),a("el-slider",{staticClass:"block-slider",attrs:{min:0,max:10,step:.1,"show-input":""},on:{change:t.jujiao},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("光圈")]),a("el-slider",{staticClass:"block-slider",attrs:{min:0,max:10,step:.1,"show-input":""},on:{change:t.guangquan},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}})],1),a("div",{staticClass:"bianbei publicstyle"},[a("i",{staticClass:"el-icon-remove-outline left",on:{mousedown:function(e){return t.handleStart("ZOOM_OUT")},mouseup:function(e){return t.handleStop("stop")}}}),a("span",[t._v("变倍")]),a("i",{staticClass:"el-icon-circle-plus-outline right",on:{mousedown:function(e){return t.handleStart("ZOOM_IN")},mouseup:function(e){return t.handleStop("stop")}}})])])])},i=[],o=a("2f62"),r=a("e953"),c=a("7658");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){d(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var u={props:{active_item:{type:Object}},data:function(){return{value:4,value2:5,value3:5,options:[{key:1,value:1},{key:2,value:2},{key:3,value:3},{key:4,value:4},{key:5,value:5},{key:6,value:6},{key:7,value:7},{key:8,value:8}],upFlag:!0,leftFlag:!0,downFlag:!0,rightFlag:!0}},computed:s(s({},Object(o["c"])("d2admin",{themeActiveSetting:"theme/activeSetting"})),{},{bgColor:function(){return r["a"][this.themeActiveSetting.name].areaBackgroundHover}}),mounted:function(){this.jianpanBangding()},methods:{handleStart:function(t){if(!this.active_item.nodeId)return!1;var e="";e="FOCUS"===t?this.value2:"IRIS"===t?this.value3:this.value;var a={id:this.active_item.nodeId,speed:e,ptzCommandEnum:t};c["a"].ptzcontrollerStart(a).then((function(t){}))},jujiao:function(t){this.handleStart("FOCUS")},guangquan:function(t){this.handleStart("IRIS")},handleStop:function(t){if(!this.active_item.nodeId)return!1;var e={id:this.active_item.nodeId};c["a"].ptzcontrollerStop(e).then((function(t){}))},jianpanBangding:function(){var t=this;document.onkeydown=function(e){var a=e||window.event;if(!t.active_item.live)return!1;a&&38===a.keyCode&&!0===t.upFlag&&(console.log("38=上键.按下"),t.handleStart("UP"),t.upFlag=!1),a&&37===a.keyCode&&!0===t.leftFlag&&(console.log("37=左键.按下"),t.handleStart("LEFT"),t.leftFlag=!1),a&&40===a.keyCode&&!0===t.downFlag&&(console.log("40=下键.按下"),t.handleStart("DOWN"),t.downFlag=!1),a&&39===a.keyCode&&!0===t.rightFlag&&(console.log("39=右键.按下"),t.handleStart("RIGHT"),t.rightFlag=!1)},document.onkeyup=function(e){var a=e||window.event;if(!t.active_item.live)return!1;a&&38===a.keyCode&&(t.upFlag=!0,console.log("38=上键.抬起"),t.handleStop()),a&&37===a.keyCode&&(t.leftFlag=!0,console.log("37=左键.抬起"),t.handleStop()),a&&40===a.keyCode&&(t.downFlag=!0,console.log("40=下键.抬起"),t.handleStop()),a&&39===a.keyCode&&(t.rightFlag=!0,console.log("39=右键.抬起"),t.handleStop())}}},beforeDestroy:function(){document.onkeydown=function(){},document.onkeyup=function(){}}},p=u,h=(a("22ef"),a("2877")),f=Object(h["a"])(p,n,i,!1,null,null,null);e["default"]=f.exports},"1c79":function(t,e,a){"use strict";a("c92c")},"22ef":function(t,e,a){"use strict";a("0f8c")},"315e":function(t,e,a){"use strict";a("f0f9")},3709:function(t,e,a){"use strict";var n=a("9bd2"),i=VUE_APP_API_STATION,o=VUE_APP_API;e["a"]={basicInfo:function(t){return Object(n["a"])({url:"".concat(i,"/dynamicMonControl/getRawBasicBySpaceId"),method:"post",params:t})},querySpaceIns:function(t){return Object(n["a"])({url:"".concat(o,"/device/space/queryRawIns"),method:"post",data:t})},basicInfoRow:function(t){return Object(n["a"])({url:"".concat(o,"/device/raw/getRawBasicAndRawGroup/").concat(t),method:"get"})},confirmResult:function(t){return Object(n["a"])({url:"".concat(i,"/dynamicMonControl/confirmResult"),method:"post",params:t})},inspectSingleHst:function(t){return Object(n["a"])({url:"".concat(i,"/dynamicMonControl/inspectSingleHst"),method:"post",data:t})},startIdentificate:function(t){return Object(n["a"])({url:"".concat(i,"/dynamicMonControl/startIdetity"),method:"post",params:t})},getIdentityStatus:function(t){return Object(n["a"])({url:"".concat(i,"/dynamicMonControl/getIdentityStatus"),method:"post",params:t})},initializeIdentityStatus:function(t){return Object(n["a"])({url:"".concat(i,"/dynamicMonControl/initializeIdentityStatus"),method:"post",params:t})},getLatestRecord:function(t){return Object(n["a"])({url:"".concat(i,"/dynamicMonControl/getLatestRecord/").concat(t),method:"post"})},defectAnalysis:function(t){return Object(n["a"])({url:"".concat(i,"/inspection/defect/defectAnalysis/").concat(t),method:"get"})}}},5661:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dialog-container",{attrs:{title:"审核",width:"1200px",height:"400px",topHeight:"40px",visible:t.visible,submitLoading:t.submitLoading,appendBody:!0,confirmText:"确认",showFooter:!1},on:{"update:visible":function(e){t.visible=e},closed:t.handleClosed,closeDialog:t.close,comfirmDialog:t.comfirmDialog}},[a("div",{staticClass:"dialog-box"},[a("d2-card",{staticClass:"box-card d2-mr d2-mt"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("实时视频")])]),a("div",{staticStyle:{width:"600px",height:"340px",float:"left"}},[t.visible?a("player",{ref:"player2",staticClass:"dplayer",attrs:{widthStyle:"100%",heightStyle:"100%"}}):t._e()],1),a("div",{staticStyle:{width:"500px",height:"340px",float:"left"}},[a("contory",{staticStyle:{height:"100%"},attrs:{active_item:t.active_item}})],1)]),a("d2-card",{staticClass:"box-card d2-mr d2-mt"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("结果审核")])]),a("div",{staticStyle:{width:"600px",height:"340px",float:"left"}},[t.visible&&t.canvasImgFlag?a("canvasImg",{attrs:{picUrl:t.imgData.resultPic||"",resultMark:t.imgData.resultMark?JSON.parse(t.imgData.resultMark):[]}}):t._e()],1),a("div",{staticStyle:{width:"500px",height:"340px",float:"left"}},[a("el-form",{ref:"ruleForm",staticClass:"d2-form d2-form-check",attrs:{"label-position":"right",model:t.formInline,"label-width":"90px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"算法名称:"}},[a("el-input",{attrs:{placeholder:"请输入",disabled:""},model:{value:t.formInline.algoServiceName,callback:function(e){t.$set(t.formInline,"algoServiceName",e)},expression:"formInline.algoServiceName"}})],1)],1),a("el-col",{staticClass:"rules",attrs:{span:24}},[a("el-form-item",{attrs:{label:"审核结果"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formInline.tag,callback:function(e){t.$set(t.formInline,"tag",e)},expression:"formInline.tag"}},t._l(t.shenheOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-col",{staticClass:"rules",attrs:{span:24}},[a("el-form-item",{attrs:{label:"审核意见"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"审核结果修正"},model:{value:t.formInline.remark,callback:function(e){t.$set(t.formInline,"remark",e)},expression:"formInline.remark"}})],1)],1)],1)],1)])],1),a("div",{staticClass:"btn-group"},[a("el-button",{attrs:{size:"medium"},on:{click:t.close}},[t._v("取消")]),a("el-button",{attrs:{icon:"fa fa-floppy-o",type:"primary",size:"medium",loading:t.submitLoading},on:{click:t.comfirmDialog}},[t._v("保存")]),a("el-button",{attrs:{icon:"fa fa-floppy-o",type:"primary",size:"medium",loading:t.submitLoading},on:{click:t.addTime}},[t._v("保存并下一条")])],1)])},i=[],o=a("d6a8"),r=a("7658"),c=a("868c"),l=a("1224"),s=a("3709"),d=a("f732"),u={components:{canvasImg:o["a"],player:c["a"],contory:l["default"]},data:function(){return{visible:!1,submitLoading:!1,imgData:{resultPic:"",resultMark:"[]"},addrSrc:"",active_item:{nodeId:"",live:""},shenheOptions:[{value:"1",label:"正常"},{value:"0",label:"异常"}],formInline:{tag:"1",remark:""},data:[],row_old_id:"",row_old_nodeId:"",canvasImgFlag:!0}},computed:{},mounted:function(){},methods:{open:function(t,e,a,n){var i=this;this.imgData=t,this.formInline=t,this.data=a,this.index=e,"异常"===n&&this.$set(this.formInline,"tag","0"),this.init(),this.$nextTick((function(){i.getAddSrc(t)}))},getAddSrc:function(t){var e=this;this.active_item={},this.row_old_id===t.rawId?this.goPreset(this.row_old_nodeId,t.presetToken):s["a"].basicInfo({rawId:t.rawId,type:2}).then((function(a){a&&a.data&&(e.basicInfo=a.data,e.basicInfo.map((function(t){"devNum"===t.url?e.channel=t.name:"channelNum"===t.url?e.addId=t.name:"id"===t.url&&(e.active_item.nodeId=t.name)})),e.active_item.addrSrc="webrtc://".concat(serverIp_app_live,"/live/").concat(e.channel,"@").concat(e.addId),e.active_item.live="".concat(e.channel,"@").concat(e.addId),e.goPreset(e.active_item.nodeId,t.presetToken),e.videoPlayer(e.active_item.addrSrc),e.row_old_id=t.rawId,e.row_old_nodeId=e.active_item.nodeId)})).finally((function(){}))},videoPlayer:function(t){var e=this;setTimeout((function(){e.$refs.player2.playerInitWatch(t)}),0)},clearAll:function(){var t=this;this.$nextTick((function(){t.$refs.player2.clearRtc()}))},goPreset:function(t,e){var a={cameraId:t,point:e};r["a"].movePresetByAli(a).then((function(t){}))},close:function(){this.clearAll(),this.visible=!1},handleClosed:function(){var t=this;this.row_old_id="",this.$nextTick((function(){t.$refs.ruleForm.resetFields()}))},init:function(){this.visible=!0},comfirmDialog:function(){var t=this;this.submitLoading=!0;var e=JSON.parse(JSON.stringify(this.formInline));e.id=this.imgData.id;var a=[];a.push(e),d["a"].updateRecordItemStatus(a).then((function(e){var a=e.code;"0"===a&&(t.visible=!1,t.$emit("getappList"),t.$message.success("操作成功"))})).catch((function(t){console.log(t)})).finally((function(){t.submitLoading=!1}))},addTime:function(){var t=this;this.submitLoading=!0;var e=JSON.parse(JSON.stringify(this.formInline));e.id=this.imgData.id;var a=[];a.push(e),d["a"].updateRecordItemStatus(a).then((function(e){var a=e.code;"0"===a&&(t.$emit("getappList"),t.$message.success("操作成功"),t.canvasImgFlag=!1,setTimeout((function(){t.canvasImgFlag=!0}),0),t.index++,t.open(t.data[t.index],t.index,t.data))})).catch((function(t){console.log(t)})).finally((function(){t.submitLoading=!1}))}},beforeDestroy:function(){}},p=u,h=(a("e184"),a("2877")),f=Object(h["a"])(p,n,i,!1,null,"80762a36",null);e["default"]=f.exports},7658:function(t,e,a){"use strict";var n=a("9bd2"),i=VUE_APP_API_LIVE,o=VUE_APP_API_STATION,r=VUE_APP_API;e["a"]={ptzcontrollerStart:function(t){return Object(n["a"])({url:"".concat(o,"/camera/ptzcontrollerStart"),method:"post",data:t})},ptzcontrollerStop:function(t){return Object(n["a"])({url:"".concat(o,"/camera/ptzcontrollerStop"),method:"post",data:t})},getBasicsBySpaceIdAndType:function(t){return Object(n["a"])({url:"".concat(o,"/station/video/getBasicsBySpaceIdAndType"),method:"post",data:t})},getOrganizeSpaceIds:function(t){return Object(n["a"])({url:"".concat(o,"/station/video/getOrganizeSpaceIds"),method:"post",params:t})},getPageVideo:function(t){var e=t.data;return Object(n["a"])({url:"".concat(o,"/station/video/getBasicsBySpaceIdAndType?spaceId=").concat(e.spaceId,"&type=assistance_camera"),method:"get"})},startPlay:function(t){var e=t.data;return Object(n["a"])({url:"".concat(i,"/").concat(e.room,"/").concat(e.channel,"/startPlay"),method:"get"})},stopPlay:function(t){var e=t.data;return Object(n["a"])({url:"".concat(i,"/").concat(e.room,"/").concat(e.channel,"/stopPlay"),method:"get"})},ptzStart:function(t){var e=t.data;return Object(n["a"])({url:"".concat(o,"/common/sipPtzCmd?idAndChild=").concat(e.idAndChild,"&ptzcmd=").concat(e.direct),method:"get"})},eventMediaUpload:function(t){var e=t.data;return Object(n["a"])({url:"".concat(i,"/").concat(e.deviceId,"/").concat(e.evtId,"/").concat(e.protocol,"/").concat(e.type,"/eventMediaUpload"),method:"get"})},movePresetByAli:function(t){return Object(n["a"])({url:"".concat(o,"/camera/movePreset"),method:"post",data:{id:t.cameraId,presetToken:t.point}})},snapShot:function(t){return Object(n["a"])({url:"".concat(r,"/camera/snapShot"),method:"post",data:t})},getDataPointDetailYx:function(t){return Object(n["a"])({url:"".concat(r,"/device/space/queryDgtByRawId"),method:"post",data:t})},getDataPointDetailYc:function(t){return Object(n["a"])({url:"".concat(r,"/device/space/queryAnalogByRawId"),method:"post",data:t})},cameraStatus:function(t){return Object(n["a"])({url:"".concat(r,"/real/cameraStatus"),method:"post",params:t})},pauseTask:function(t){return Object(n["a"])({url:"".concat(o,"/camera/").concat(t,"/pauseTask"),method:"post"})},restartTask:function(t){return Object(n["a"])({url:"".concat(o,"/camera/").concat(t,"/restartTask"),method:"post"})},stopTask:function(t){return Object(n["a"])({url:"".concat(o,"/camera/").concat(t,"/stopTask"),method:"post"})},queryChannel:function(){return Object(n["a"])({url:"".concat(r,"/srs/queryChannel"),method:"get"})},querySession:function(){return Object(n["a"])({url:"".concat(r,"/srs/querySession"),method:"get"})},sip_invite:function(t){return Object(n["a"])({url:"".concat(VUE_APP_API_LIVE_KONG,"?action=sip_invite&id=").concat(t.id,"&chid=").concat(t.chid),method:"get"})},snapShotAndExcuteBase:function(t){return Object(n["a"])({url:"".concat(o,"/camera/snapShotAndExcuteBase"),method:"post",data:t})}}},"868c":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"videoClass",style:"width:"+t.widthStyle+";height:"+t.heightStyle+";"},["RTMP"===t.activeSetting.name?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"videoClass",style:"width:"+t.widthStyle+";height:"+t.heightStyle+";"},[a("div",{style:"width:"+t.widthStyle+";height:"+t.heightStyle+";",attrs:{id:"player"+t.index}}),a("div",{staticClass:"kbpsClass"},[t._v(t._s(t.kbps))]),a("flashOpen",{ref:"flashOpen"})],1):a("video",{ref:"rtc_media_player",staticStyle:{"pointer-events":"none"},style:"width:"+t.widthStyle+";height:"+t.heightStyle,attrs:{id:"rtc_media_player"+t.index,controls:"",autoplay:t.autoplay,controlslist:"nofullscreen nodownload noremoteplayback"}})])},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dialog-container",{attrs:{title:"flash权限快捷入口",width:"800px",visible:t.visible,"show-footer":!1,appendBody:!0},on:{"update:visible":function(e){t.visible=e},closed:t.handleClosed,closeDialog:t.close,comfirmDialog:t.comfirmDialog}},[a("div",{staticClass:"dialog-box"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("p",[t._v("\n            请点击下面的图标，启用Flash\n        ")]),a("div",{staticClass:"hide",attrs:{id:"main_flash_hdr"}}),a("p",[t._v("\n            若没有见到这个图标或无法通过图标开启权限，请点击链接下载"),a("a",{staticStyle:{color:"#fff"},attrs:{href:"/video/flash_tutorial.pdf",download:"flash_tutorial.pdf"}},[t._v("flash操作指南")])])])],1)],1)])},r=[],c={components:{},data:function(){return{visible:!1}},props:{},methods:{open:function(t){var e=this;this.visible=!0,$("#main_flash_hdr").hide(),setTimeout((function(){e.playerWin()}),0)},handleClosed:function(){this.visible=!1},playerWin:function(){$("#main_flash_hdr").html('\n            <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="100%" height="100%"> \n                <param name="movie" value="srs_player/release/srs_player.swf"> \n                <param name="quality" value="autohigh"> \n                <param name="swliveconnect" value="true"> \n                <param name="allowScriptAccess" value="always"> \n                <param name="bgcolor" value="#0"> \n                <param name="allowFullScreen" value="true"> \n                <param name="wmode" value="opaque"> \n                <param name="FlashVars" value="log=1"> \n                <param name="flashvars" value="id=1&on_player_ready=__on_flash_ready"> \n                <embed src="srs_player/release/srs_player.swf" width="100%" height="100%" \n                    quality="autohigh" bgcolor="#0" align="middle" allowfullscreen="true" allowscriptaccess="always" \n                    type="application/x-shockwave-flash" swliveconnect="true" wmode="opaque" \n                    flashvars="id=1&on_player_ready=__on_flash_ready" \n                    pluginspage="http://www.macromedia.com/go/getflashplayer"> \n            </object> \n            '),$("#main_flash_hdr").show()},close:function(){this.handleClosed()},comfirmDialog:function(){}}},l=c,s=a("2877"),d=Object(s["a"])(l,o,r,!1,null,null,null),u=d.exports,p=a("7658"),h=a("2f62");function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach((function(e){v(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function v(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var y={name:"about",components:{flashOpen:u},props:{index:{type:[Number,String],default:null},widthStyle:{type:String,default:"900px"},heightStyle:{type:String,default:"320px"},autoplay:{default:!0}},data:function(){return{loading:!1,startPlay:null,url:"",pc:null,srs_player:null,query:null,autoLoadPage:null,player:null,kbps:""}},computed:m({},Object(h["c"])("d2admin",{activeSetting:"theme/activeSetting"})),methods:{playerInit:function(){var t=this;"RTMP"===this.activeSetting.name?this.$nextTick((function(){t.srs_player=null;var e=null,a=parse_query_string();if(e=t.url,!t.srs_player){$("#div_container"+t.index).remove();var n=$("<div/>");$(n).attr("id","div_container"+t.index),$("#player"+t.index).append(n);var i=$("<div/>");$(i).attr("id","player_id"+t.index),$(n).append(i);var o=$("#player"+t.index).width(),r=$("#player"+t.index).height();t.srs_player=new SrsPlayer("player_id"+t.index,o,r),t.srs_player.on_player_ready=function(){if(e.indexOf(".m3u8")>0&&2,a.buffer)for(var t=0;t<bts.length-1;t++){var n=bts[t],i=bts[t+1];if(Number(a.buffer)>=n&&Number(a.buffer)<i){n;break}}this.play(e)},t.srs_player.on_player_timer=function(e,a,n,i,o){t.kbps=n.toFixed(0)+"kbps"},t.srs_player.start()}})):this.$nextTick((function(){t.pc=null,t.startPlay=function(){$("#rtc_media_player"+t.index).show();var e=parse_rtmp_url(t.url),a=window.location.protocol;t.pc&&t.pc.close(),t.pc=new RTCPeerConnection(null),t.pc.onaddstream=function(e){$("#rtc_media_player"+t.index).prop("srcObject",e.stream)},new Promise((function(e,a){t.pc.addTransceiver("audio",{direction:"recvonly"}),t.pc.addTransceiver("video",{direction:"recvonly"}),t.pc.createOffer((function(t){e(t)}),(function(t){a(t)}))})).then((function(e){return t.pc.setLocalDescription(e).then((function(){return e}))})).then((function(t){return new Promise((function(n,i){var o=e.port||1985,r=e.user_query.play||"/rtc/v1/play/";r.lastIndexOf("/")!==r.length-1&&(r+="/");var c=a+"//"+e.server+":"+o+r;for(var l in e.user_query)"api"!==l&&"play"!==l&&(c+="&"+l+"="+e.user_query[l]);c=c.replace(r+"&",r+"?");var s={api:c,streamurl:e.url,clientip:null,sdp:t.sdp};$.ajax({type:"POST",url:c,data:JSON.stringify(s),contentType:"application/json",dataType:"json"}).done((function(t){if(t.code)i(t);else{var r=a+"//"+e.server+":"+o+"/rtc/v1/nack/";$("#sessionid").html(t.sessionid),$("#simulator-drop").attr("href",r+"?drop=1&username="+t.sessionid),n(t.sdp)}})).fail((function(t){i(t)}))}))})).then((function(e){return t.pc.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:e}))})).catch((function(e){throw t.pc.close(),$("#rtc_media_player"+t.index).hide(),e}))},$("#rtc_media_player"+t.index).hide();var e=parse_query_string();"true"===e.autostart&&($("#rtc_media_player"+t.index).prop("muted",!0),t.startPlay())}))},playerInitWatch:function(t){var e=this;this.url=t;var a=this.url.split("/live/")[1];p["a"].queryChannel().then((function(n){var i=!1;if(n.data.map((function(t){t.id===a&&(i=!0)})),i)if("RTMP"===e.activeSetting.name){var o=e.hasUsableFlash();o||e.$refs.flashOpen.open(),e.url="rtmp://".concat(serverIp_app_live,":1935/live")+t.split("live")[1],e.playerInit()}else e.startPlay(),e.setIntervalFun();else{var r={id:a.split("@")[0],chid:a.split("@")[1]};p["a"].queryChannel(r).then((function(a){if("RTMP"===e.activeSetting.name){var n=e.hasUsableFlash();n||e.$refs.flashOpen.open(),e.url="rtmp://".concat(serverIp_app_live,":1935/live")+t.split("live")[1],e.playerInit()}else e.startPlay(),e.setIntervalFun()}))}}))},playerInitWatchCarousel:function(t){this.url=t,this.startPlay(),$("#rtc_media_player"+this.index).prop("muted",!0)},clearRtc:function(){"RTMP"===this.activeSetting.name?this.srs_player&&(this.kbps="",this.srs_player.stop(),this.srs_player=null):this.pc&&(this.pc.close(),$("#rtc_media_player"+this.index).hide())},setIntervalFun:function(){},hasUsableFlash:function(){var t;return t="undefined"!==typeof window.ActiveXObject?new ActiveXObject("ShockwaveFlash.ShockwaveFlash"):navigator.plugins["Shockwave Flash"],!!t},zhuapai:function(){var t,e,a=1;e=$("#output"),t=$("#rtc_media_player"+this.index).get(0);var n=function(){var n=document.createElement("canvas");n.width=t.videoWidth*a,n.height=t.videoHeight*a,n.getContext("2d").drawImage(t,0,0,n.width,n.height);var i=document.createElement("img");i.src=n.toDataURL(),e.prepend(i)};n()}},watch:{},mounted:function(){this.playerInit()},destroyed:function(){}},g=y,b=(a("1c79"),a("315e"),Object(s["a"])(g,n,i,!1,null,"57a62aec",null));e["a"]=b.exports},c92c:function(t,e,a){},e184:function(t,e,a){"use strict";a("eb62")},eb62:function(t,e,a){},f0f9:function(t,e,a){},f732:function(t,e,a){"use strict";var n=a("9bd2"),i=VUE_APP_API_STATION;e["a"]={getRecordPage:function(t){return Object(n["a"])({url:"".concat(i,"/inspection/record/getRecordPage"),method:"post",data:t})},recordExportForExcel:function(t){return Object(n["a"])({url:"".concat(i,"/inspection/record/recordExportForExcel"),responseType:"blob",method:"post",data:{}})},recordExportForWord:function(t){return Object(n["a"])({url:"".concat(i,"/inspection/record/recordExportForWord"),responseType:"blob",method:"post",data:t})},updateRecordItemStatus:function(t){return Object(n["a"])({url:"".concat(i,"/inspection/recordItem/updateRecordItemStatus"),method:"post",data:t})},updateRecordItemByRecordId:function(t){return Object(n["a"])({url:"".concat(i,"/inspection/record/updateRecordItemByRecordId"),method:"post",data:t})}}}}]);