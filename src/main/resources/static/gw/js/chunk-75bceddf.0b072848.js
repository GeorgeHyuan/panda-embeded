(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75bceddf","chunk-5e415814","chunk-2d0e9bcd"],{"06c5":function(e,t,n){"use strict";t["a"]={data:function(){return{cardShowMax:!1}},methods:{handleShowMax:function(e){this.cardShowMax=e}}}},"0f8c":function(e,t,n){},1224:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control"},[n("div",{staticClass:"direction"},[n("i",{staticClass:"el-icon-caret-top up btn",on:{mousedown:function(t){return e.handleStart("UP")},mouseup:function(t){return e.handleStop("up")}}}),n("i",{staticClass:"el-icon-caret-bottom bottom btn",on:{mousedown:function(t){return e.handleStart("DOWN")},mouseup:function(t){return e.handleStop("down")}}}),n("i",{staticClass:"el-icon-caret-left left btn",on:{mousedown:function(t){return e.handleStart("LEFT")},mouseup:function(t){return e.handleStop("left")}}}),n("i",{staticClass:"el-icon-caret-right right btn",on:{mousedown:function(t){return e.handleStart("RIGHT")},mouseup:function(t){return e.handleStop("right")}}}),n("span",{staticClass:"center-ok"})]),n("div",{staticClass:"zoom"},[n("div",{staticClass:"block"},[n("span",{staticClass:"demonstration"},[e._v("步长")]),n("el-slider",{staticClass:"block-slider",attrs:{min:1,max:8,"show-input":""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),n("div",{staticClass:"block"},[n("span",{staticClass:"demonstration"},[e._v("聚焦")]),n("el-slider",{staticClass:"block-slider",attrs:{min:0,max:10,step:.1,"show-input":""},on:{change:e.jujiao},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),n("div",{staticClass:"block"},[n("span",{staticClass:"demonstration"},[e._v("光圈")]),n("el-slider",{staticClass:"block-slider",attrs:{min:0,max:10,step:.1,"show-input":""},on:{change:e.guangquan},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}})],1),n("div",{staticClass:"bianbei publicstyle"},[n("i",{staticClass:"el-icon-remove-outline left",on:{mousedown:function(t){return e.handleStart("ZOOM_OUT")},mouseup:function(t){return e.handleStop("stop")}}}),n("span",[e._v("变倍")]),n("i",{staticClass:"el-icon-circle-plus-outline right",on:{mousedown:function(t){return e.handleStart("ZOOM_IN")},mouseup:function(t){return e.handleStop("stop")}}})])])])},i=[],r=n("2f62"),o=n("e953"),s=n("7658");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={props:{active_item:{type:Object}},data:function(){return{value:4,value2:5,value3:5,options:[{key:1,value:1},{key:2,value:2},{key:3,value:3},{key:4,value:4},{key:5,value:5},{key:6,value:6},{key:7,value:7},{key:8,value:8}],upFlag:!0,leftFlag:!0,downFlag:!0,rightFlag:!0}},computed:l(l({},Object(r["c"])("d2admin",{themeActiveSetting:"theme/activeSetting"})),{},{bgColor:function(){return o["a"][this.themeActiveSetting.name].areaBackgroundHover}}),mounted:function(){this.jianpanBangding()},methods:{handleStart:function(e){if(!this.active_item.nodeId)return!1;var t="";t="FOCUS"===e?this.value2:"IRIS"===e?this.value3:this.value;var n={id:this.active_item.nodeId,speed:t,ptzCommandEnum:e};s["a"].ptzcontrollerStart(n).then((function(e){}))},jujiao:function(e){this.handleStart("FOCUS")},guangquan:function(e){this.handleStart("IRIS")},handleStop:function(e){if(!this.active_item.nodeId)return!1;var t={id:this.active_item.nodeId};s["a"].ptzcontrollerStop(t).then((function(e){}))},jianpanBangding:function(){var e=this;document.onkeydown=function(t){var n=t||window.event;if(!e.active_item.live)return!1;n&&38===n.keyCode&&!0===e.upFlag&&(console.log("38=上键.按下"),e.handleStart("UP"),e.upFlag=!1),n&&37===n.keyCode&&!0===e.leftFlag&&(console.log("37=左键.按下"),e.handleStart("LEFT"),e.leftFlag=!1),n&&40===n.keyCode&&!0===e.downFlag&&(console.log("40=下键.按下"),e.handleStart("DOWN"),e.downFlag=!1),n&&39===n.keyCode&&!0===e.rightFlag&&(console.log("39=右键.按下"),e.handleStart("RIGHT"),e.rightFlag=!1)},document.onkeyup=function(t){var n=t||window.event;if(!e.active_item.live)return!1;n&&38===n.keyCode&&(e.upFlag=!0,console.log("38=上键.抬起"),e.handleStop()),n&&37===n.keyCode&&(e.leftFlag=!0,console.log("37=左键.抬起"),e.handleStop()),n&&40===n.keyCode&&(e.downFlag=!0,console.log("40=下键.抬起"),e.handleStop()),n&&39===n.keyCode&&(e.rightFlag=!0,console.log("39=右键.抬起"),e.handleStop())}}},beforeDestroy:function(){document.onkeydown=function(){},document.onkeyup=function(){}}},p=d,h=(n("22ef"),n("2877")),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},"1c79":function(e,t,n){"use strict";n("c92c")},"22ef":function(e,t,n){"use strict";n("0f8c")},"315e":function(e,t,n){"use strict";n("f0f9")},3709:function(e,t,n){"use strict";var a=n("9bd2"),i=VUE_APP_API_STATION,r=VUE_APP_API;t["a"]={basicInfo:function(e){return Object(a["a"])({url:"".concat(i,"/dynamicMonControl/getRawBasicBySpaceId"),method:"post",params:e})},querySpaceIns:function(e){return Object(a["a"])({url:"".concat(r,"/device/space/queryRawIns"),method:"post",data:e})},basicInfoRow:function(e){return Object(a["a"])({url:"".concat(r,"/device/raw/getRawBasicAndRawGroup/").concat(e),method:"get"})},confirmResult:function(e){return Object(a["a"])({url:"".concat(i,"/dynamicMonControl/confirmResult"),method:"post",params:e})},inspectSingleHst:function(e){return Object(a["a"])({url:"".concat(i,"/dynamicMonControl/inspectSingleHst"),method:"post",data:e})},startIdentificate:function(e){return Object(a["a"])({url:"".concat(i,"/dynamicMonControl/startIdetity"),method:"post",params:e})},getIdentityStatus:function(e){return Object(a["a"])({url:"".concat(i,"/dynamicMonControl/getIdentityStatus"),method:"post",params:e})},initializeIdentityStatus:function(e){return Object(a["a"])({url:"".concat(i,"/dynamicMonControl/initializeIdentityStatus"),method:"post",params:e})},getLatestRecord:function(e){return Object(a["a"])({url:"".concat(i,"/dynamicMonControl/getLatestRecord/").concat(e),method:"post"})},defectAnalysis:function(e){return Object(a["a"])({url:"".concat(i,"/inspection/defect/defectAnalysis/").concat(e),method:"get"})}}},"5cf4":function(e,t,n){"use strict";var a=n("9bd2"),i=VUE_APP_API_STATION,r=VUE_APP_API;t["a"]={equipmentFrame:function(e){return Object(a["a"])({url:"".concat(i,"/dynamicMonControl/getLastPonitByDevice"),method:"post",params:e})},getCharts:function(e){return Object(a["a"])({url:"".concat(r,"/real/getVarNamesValue"),method:"post",data:e})},getRawInspectionByCamaraId:function(e){return Object(a["a"])({url:"".concat(i,"/dynamicMonControl/getRawInspectionByCamaraId"),method:"post",params:e})},getSpaceByParam:function(e){return Object(a["a"])({url:"".concat(r,"/device/space/getSpaceByParam"),method:"post",data:e})}}},"7dd4":function(e,t,n){},"868c":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"videoClass",style:"width:"+e.widthStyle+";height:"+e.heightStyle+";"},["RTMP"===e.activeSetting.name?n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"videoClass",style:"width:"+e.widthStyle+";height:"+e.heightStyle+";"},[n("div",{style:"width:"+e.widthStyle+";height:"+e.heightStyle+";",attrs:{id:"player"+e.index}}),n("div",{staticClass:"kbpsClass"},[e._v(e._s(e.kbps))]),n("flashOpen",{ref:"flashOpen"})],1):n("video",{ref:"rtc_media_player",staticStyle:{"pointer-events":"none"},style:"width:"+e.widthStyle+";height:"+e.heightStyle,attrs:{id:"rtc_media_player"+e.index,controls:"",autoplay:e.autoplay,controlslist:"nofullscreen nodownload noremoteplayback"}})])},i=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dialog-container",{attrs:{title:"flash权限快捷入口",width:"800px",visible:e.visible,"show-footer":!1,appendBody:!0},on:{"update:visible":function(t){e.visible=t},closed:e.handleClosed,closeDialog:e.close,comfirmDialog:e.comfirmDialog}},[n("div",{staticClass:"dialog-box"},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[n("p",[e._v("\n            请点击下面的图标，启用Flash\n        ")]),n("div",{staticClass:"hide",attrs:{id:"main_flash_hdr"}}),n("p",[e._v("\n            若没有见到这个图标或无法通过图标开启权限，请点击链接下载"),n("a",{staticStyle:{color:"#fff"},attrs:{href:"/video/flash_tutorial.pdf",download:"flash_tutorial.pdf"}},[e._v("flash操作指南")])])])],1)],1)])},o=[],s={components:{},data:function(){return{visible:!1}},props:{},methods:{open:function(e){var t=this;this.visible=!0,$("#main_flash_hdr").hide(),setTimeout((function(){t.playerWin()}),0)},handleClosed:function(){this.visible=!1},playerWin:function(){$("#main_flash_hdr").html('\n            <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="100%" height="100%"> \n                <param name="movie" value="srs_player/release/srs_player.swf"> \n                <param name="quality" value="autohigh"> \n                <param name="swliveconnect" value="true"> \n                <param name="allowScriptAccess" value="always"> \n                <param name="bgcolor" value="#0"> \n                <param name="allowFullScreen" value="true"> \n                <param name="wmode" value="opaque"> \n                <param name="FlashVars" value="log=1"> \n                <param name="flashvars" value="id=1&on_player_ready=__on_flash_ready"> \n                <embed src="srs_player/release/srs_player.swf" width="100%" height="100%" \n                    quality="autohigh" bgcolor="#0" align="middle" allowfullscreen="true" allowscriptaccess="always" \n                    type="application/x-shockwave-flash" swliveconnect="true" wmode="opaque" \n                    flashvars="id=1&on_player_ready=__on_flash_ready" \n                    pluginspage="http://www.macromedia.com/go/getflashplayer"> \n            </object> \n            '),$("#main_flash_hdr").show()},close:function(){this.handleClosed()},comfirmDialog:function(){}}},c=s,l=n("2877"),u=Object(l["a"])(c,r,o,!1,null,null,null),d=u.exports,p=n("7658"),h=n("2f62");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={name:"about",components:{flashOpen:d},props:{index:{type:[Number,String],default:null},widthStyle:{type:String,default:"900px"},heightStyle:{type:String,default:"320px"},autoplay:{default:!0}},data:function(){return{loading:!1,startPlay:null,url:"",pc:null,srs_player:null,query:null,autoLoadPage:null,player:null,kbps:""}},computed:m({},Object(h["c"])("d2admin",{activeSetting:"theme/activeSetting"})),methods:{playerInit:function(){var e=this;"RTMP"===this.activeSetting.name?this.$nextTick((function(){e.srs_player=null;var t=null,n=parse_query_string();if(t=e.url,!e.srs_player){$("#div_container"+e.index).remove();var a=$("<div/>");$(a).attr("id","div_container"+e.index),$("#player"+e.index).append(a);var i=$("<div/>");$(i).attr("id","player_id"+e.index),$(a).append(i);var r=$("#player"+e.index).width(),o=$("#player"+e.index).height();e.srs_player=new SrsPlayer("player_id"+e.index,r,o),e.srs_player.on_player_ready=function(){if(t.indexOf(".m3u8")>0&&2,n.buffer)for(var e=0;e<bts.length-1;e++){var a=bts[e],i=bts[e+1];if(Number(n.buffer)>=a&&Number(n.buffer)<i){a;break}}this.play(t)},e.srs_player.on_player_timer=function(t,n,a,i,r){e.kbps=a.toFixed(0)+"kbps"},e.srs_player.start()}})):this.$nextTick((function(){e.pc=null,e.startPlay=function(){$("#rtc_media_player"+e.index).show();var t=parse_rtmp_url(e.url),n=window.location.protocol;e.pc&&e.pc.close(),e.pc=new RTCPeerConnection(null),e.pc.onaddstream=function(t){$("#rtc_media_player"+e.index).prop("srcObject",t.stream)},new Promise((function(t,n){e.pc.addTransceiver("audio",{direction:"recvonly"}),e.pc.addTransceiver("video",{direction:"recvonly"}),e.pc.createOffer((function(e){t(e)}),(function(e){n(e)}))})).then((function(t){return e.pc.setLocalDescription(t).then((function(){return t}))})).then((function(e){return new Promise((function(a,i){var r=t.port||1985,o=t.user_query.play||"/rtc/v1/play/";o.lastIndexOf("/")!==o.length-1&&(o+="/");var s=n+"//"+t.server+":"+r+o;for(var c in t.user_query)"api"!==c&&"play"!==c&&(s+="&"+c+"="+t.user_query[c]);s=s.replace(o+"&",o+"?");var l={api:s,streamurl:t.url,clientip:null,sdp:e.sdp};$.ajax({type:"POST",url:s,data:JSON.stringify(l),contentType:"application/json",dataType:"json"}).done((function(e){if(e.code)i(e);else{var o=n+"//"+t.server+":"+r+"/rtc/v1/nack/";$("#sessionid").html(e.sessionid),$("#simulator-drop").attr("href",o+"?drop=1&username="+e.sessionid),a(e.sdp)}})).fail((function(e){i(e)}))}))})).then((function(t){return e.pc.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:t}))})).catch((function(t){throw e.pc.close(),$("#rtc_media_player"+e.index).hide(),t}))},$("#rtc_media_player"+e.index).hide();var t=parse_query_string();"true"===t.autostart&&($("#rtc_media_player"+e.index).prop("muted",!0),e.startPlay())}))},playerInitWatch:function(e){var t=this;this.url=e;var n=this.url.split("/live/")[1];p["a"].queryChannel().then((function(a){var i=!1;if(a.data.map((function(e){e.id===n&&(i=!0)})),i)if("RTMP"===t.activeSetting.name){var r=t.hasUsableFlash();r||t.$refs.flashOpen.open(),t.url="rtmp://".concat(serverIp_app_live,":1935/live")+e.split("live")[1],t.playerInit()}else t.startPlay(),t.setIntervalFun();else{var o={id:n.split("@")[0],chid:n.split("@")[1]};p["a"].queryChannel(o).then((function(n){if("RTMP"===t.activeSetting.name){var a=t.hasUsableFlash();a||t.$refs.flashOpen.open(),t.url="rtmp://".concat(serverIp_app_live,":1935/live")+e.split("live")[1],t.playerInit()}else t.startPlay(),t.setIntervalFun()}))}}))},playerInitWatchCarousel:function(e){this.url=e,this.startPlay(),$("#rtc_media_player"+this.index).prop("muted",!0)},clearRtc:function(){"RTMP"===this.activeSetting.name?this.srs_player&&(this.kbps="",this.srs_player.stop(),this.srs_player=null):this.pc&&(this.pc.close(),$("#rtc_media_player"+this.index).hide())},setIntervalFun:function(){},hasUsableFlash:function(){var e;return e="undefined"!==typeof window.ActiveXObject?new ActiveXObject("ShockwaveFlash.ShockwaveFlash"):navigator.plugins["Shockwave Flash"],!!e},zhuapai:function(){var e,t,n=1;t=$("#output"),e=$("#rtc_media_player"+this.index).get(0);var a=function(){var a=document.createElement("canvas");a.width=e.videoWidth*n,a.height=e.videoHeight*n,a.getContext("2d").drawImage(e,0,0,a.width,a.height);var i=document.createElement("img");i.src=a.toDataURL(),t.prepend(i)};a()}},watch:{},mounted:function(){this.playerInit()},destroyed:function(){}},y=g,b=(n("1c79"),n("315e"),Object(l["a"])(y,a,i,!1,null,"57a62aec",null));t["a"]=b.exports},"8f8a":function(e,t,n){"use strict";n.r(t),t["default"]={data:function(){var e=this;this.$createElement;return{data:[],columns:[{title:"序号",key:"",width:60,formatter:function(e,t,n,a){return a+1}},{title:"子任务名称",key:"name",width:230,showOverflowTooltip:!0},{title:"摄像头",key:"rawName",showOverflowTooltip:!0,component:{render:function(t,n){return t("div",{style:{cursor:"pointer",width:"100%",color:"#00c0ff"},domProps:{innerHTML:n.rawName},on:{click:function(){e.openVideo(n)}}})}}},{title:"算法名称",key:"algoServiceName",width:230,showOverflowTooltip:!0},{title:"开始时间",key:"startTime",width:160,showOverflowTooltip:!0},{title:"结束时间",key:"endTime",width:160,showOverflowTooltip:!0},{title:"任务状态",key:"desc",width:"100",component:{render:function(e,t){return"1"===t.desc?e("el-tag",{attrs:{type:"primary"}},["等待执行"]):"2"===t.desc?e("el-tag",{attrs:{type:"warning"}},["正在执行"]):"3"===t.desc?e("el-tag",{attrs:{type:"success"}},["已完成"]):"4"===t.desc?e("el-tag",{attrs:{type:"success"}},["手动停止"]):"5"===t.desc?e("el-tag",{attrs:{type:"danger"}},["异常终止"]):void 0}}},{title:"分析结果",key:"resultValue",width:"90",showOverflowTooltip:!0,component:{render:function(e,t){var n="";return t.resultMark&&JSON.parse(t.resultMark).map((function(e){n=e.tagName||"",e.properties&&e.properties.map((function(e,t){var a=e.sceneName+e.sceneValueName;n+="\n"+a}))})),"1"===t.resultValue&&"3"===t.desc?e("el-tag",{attrs:{type:"success"}},["--"]):"0"===t.resultValue?e("el-tag",{attrs:{type:"danger"}},[n||"异常"]):e("el-tag",{attrs:{type:"primary"}},["--"])}}}],rowHandle:{width:60,custom:[{emit:"imgOpenFun",text:"查看图片",size:"mini",type:"primary",icon:"el-icon-picture-outline-round",circle:!0,disabled:function(e,t){return!t.resultPic}}]},loading:!1,pagination:{currentPage:1,pageSize:100,total:0},options:{stripe:!0,height:"".concat(this.cardShowMax?"calc(100vh - 100px)":"232px"),border:!0}}}}},"906f":function(e,t,n){"use strict";n("7dd4")},"9b22":function(e,t,n){},c92c:function(e,t,n){},d6ec:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dialog-container",{staticClass:"scoped-dialog",attrs:{showFooter:!1,title:"实时视频",width:"1200PX",visible:e.visible,appendBody:!0,topHeight:"9vh"},on:{"update:visible":function(t){e.visible=t},closed:e.handleClosed}},[n("div",{staticClass:"video-sty",staticStyle:{height:"calc(75vh)",width:"80%"},attrs:{id:"player-video-box"}},[n("div",{staticClass:"tou-kuang",on:{dblclick:e.clikFullScreen}}),e.visible?n("player",{ref:"player",staticClass:"dplayer",attrs:{url:e.addrSrc,widthStyle:"100%",heightStyle:"100%"}}):e._e()],1),n("div",{staticClass:"video-sty",staticStyle:{height:"650px",width:"20%"},style:{height:e.cardShowMax?"calc(100vh - 80px)":"calc(75vh)"}},[2===e.type?n("div",{staticClass:"data-point"},[n("h3",[e._v(e._s(e.cameraData.TypeName))]),n("div",e._l(e.pointData,(function(t,a){return n("span",{key:t.id,class:{active:a===e.current},on:{click:function(n){return e.getVideoInfo(t,a)}}},[n("i",{staticClass:"el-icon-video-camera-solid"}),e._v("\n        "+e._s(t.name))])})),0)]):e._e(),1===e.type?n("div",{staticClass:"data-point"},[n("h3",[e._v(e._s(e.devTreeNode.name||e.transformer.TypeName))]),n("div",e._l(e.pointOneData,(function(t,a){return n("span",{key:t.id,class:{active:a===e.current},on:{click:function(n){return e.getVideoInfo(t,a)}}},[n("i",{staticClass:"el-icon-video-camera-solid"}),e._v("\n        "+e._s(t.spaceVarName)+"\n       ")])})),0)]):e._e(),n("contory",{staticStyle:{height:"55%"},attrs:{active_item:e.active_item}})],1)])},i=[],r=n("868c"),o=n("1224"),s=n("7658"),c=n("2f62"),l=n("3709"),u=n("5cf4"),d=n("f5b2");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={components:{player:r["a"],contory:o["default"]},data:function(){return{cardShowMax:!1,visible:!1,addrSrc:"",active_item:{},pointData:[],pointOneData:[],row:null,type:null,current:-1,transformer:{},cameraData:{},fullScreen:!1}},computed:h(h({},Object(c["c"])("d2admin",{devTreeNode:"tree/devTreeNode"})),{},{devId:function(){return this.devTreeNode.id}}),watch:{},methods:{getVideoInfo:function(e,t){this.current=t,1===this.type?(this.row=e,this.getBasicInfo(1)):this.goPreset(e.id,e.spaceId)},getBasicInfo:function(e,t){var n=this,a=1===e?this.row.rawId:this.cameraData.id;l["a"].basicInfo({rawId:a,type:e}).then((function(e){if(e&&e.data){n.basicInfo=e.data,n.basicInfo.map((function(e){"devNum"===e.url?n.channel=e.name:"channelNum"===e.url?n.addId=e.name:"id"===e.url&&(n.active_item.nodeId=e.name)}));var i="webrtc://".concat(serverIp_app_live,"/live/").concat(n.channel,"@").concat(n.addId);i!==n.addrSrc&&(n.addrSrc=i,n.videoPlayer()),n.active_item.live="".concat(n.channel,"@").concat(n.addId),t||n.goPreset(a,n.active_item.nodeId)}})).finally((function(){}))},videoPlayer:function(){var e=this;setTimeout((function(){e.$refs.player.playerInitWatch(e.addrSrc)}),0)},goPreset:function(e,t){l["a"].querySpaceIns({id:e}).then((function(e){if(e&&e.data.length){var n={cameraId:t,point:e.data[0].token};s["a"].movePresetByAli(n).then((function(e){}))}}))},open:function(e,t,n){var a=this;this.visible=!0,this.type=t,this.$nextTick((function(){2===t?(a.cameraData=e,a.getCameraPoint(t)):1===t&&a.getDevPoint(t,n)}))},sendData:function(e,t,n){this.transformer=e,this.current=n,this.type=t,this.open(this.devTreeNode,t,n)},getCameraPoint:function(e){var t=this;u["a"].getRawInspectionByCamaraId({id:this.cameraData.id}).then((function(n){n&&n.data.length&&(t.pointData=n.data,t.getBasicInfo(e),t.row=t.pointData[0],t.current=0)}))},cardRefresh:function(){},getDevPoint:function(e,t){var n=this;u["a"].equipmentFrame({id:this.transformer.id||this.devId}).then((function(a){a&&a.data&&a.data.length&&(n.pointOneData=a.data,n.row=n.pointOneData[t],n.getBasicInfo(e,!1))}))},handleShowMax:function(e){this.cardShowMax=e},clikFullScreen:function(){var e=document.getElementById("player-video-box");this.fullScreen?Object(d["a"])(e):Object(d["b"])(e)},clearData:function(){this.cardShowMax=!1,this.visible=!1,this.addrSrc="",this.active_item={},this.pointData=[],this.row=null,this.type=null,this.current=-1,this.transformer={},this.cameraData={},this.pointOneData=[],this.$refs.player&&this.$refs.player.clearRtc()},handleClosed:function(){this.clearData(),this.$refs.player&&this.$refs.player.clearRtc()}},mounted:function(){var e=this;window.onresize=function(){e.fullScreen=!e.fullScreen}}},v=m,g=(n("906f"),n("2877")),y=Object(g["a"])(v,a,i,!1,null,"424bcc77",null);t["default"]=y.exports},df94:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("d2-card",{staticClass:"box-card",on:{handleShowMax:e.handleShowMax}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("i",{staticClass:"fa fa-hourglass-1"}),n("span",[e._v("子巡视任务")])]),n("el-form",{staticClass:"d2-form",attrs:{"label-position":"right",inline:!0,"label-width":"80px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-row",{attrs:{gutter:10}},[n("el-form-item",{attrs:{label:"任务名称:"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入任务名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("el-form-item",{attrs:{label:""}},[n("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[n("el-checkbox",{attrs:{label:"1"}},[e._v("等待执行")]),n("el-checkbox",{attrs:{label:"2"}},[e._v("正在执行")]),n("el-checkbox",{attrs:{label:"3"}},[e._v("已完成")]),n("el-checkbox",{attrs:{label:"4"}},[e._v("手动停止")]),n("el-checkbox",{attrs:{label:"5"}},[e._v("异常终止")])],1)],1),n("el-form-item",{attrs:{"label-width":"0px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.puery}},[e._v("查询")])],1)],1)],1)],1)],1),n("d2-crud",{ref:"d2Crud",attrs:{columns:e.columns,data:e.data,loading:e.loading,options:e.options,"row-handle":e.rowHandle,pagination:e.pagination},on:{imgOpenFun:e.imgOpenFun,"pagination-current-change":e.paginationCurrentChange}},[n("div",{attrs:{slot:"header"},slot:"header"})]),n("video-list",{ref:"videoList"}),n("imgOpen",{ref:"imgOpen"})],1)},i=[],r=n("9951"),o=n("8f8a"),s=n("cbe7"),c=n("d6ec"),l=n("fa20"),u=n("06c5"),d={name:"app-manage",components:{videoList:c["default"],imgOpen:l["default"]},mixins:[u["a"],r["a"],o["default"]],data:function(){return{checkList:["1","2","3","4","5"],name:"",cardShowMax:!1}},computed:{},created:function(){},mounted:function(){},methods:{paginationCurrentChange:function(e){this.pagination.currentPage=e,this.getappList()},puery:function(){this.pagination.currentPage=1,this.getappList()},getappList:function(e){var t=this;if(this.taskId===e){var n={recordsId:this.taskId,descList:this.checkList,name:this.name};s["a"].getRecordItemPage(n).then((function(e){t.data=e.data})).catch((function(e){console.log(e)})).finally((function(){}))}else{if((e||""===e)&&(this.pagination.currentPage=1,this.name="",this.taskId=e),""===this.taskId)return this.data=[],this.pagination.total=0,!1;this.loading=!0;var a={current:this.pagination.currentPage,size:this.pagination.pageSize,recordsId:this.taskId,descList:this.checkList,name:this.name};this.data=[],s["a"].getRecordItemPage(a).then((function(e){t.data=e.data.records,t.pagination.total=e.data.total,t.$emit("emitImageData",t.data)})).catch((function(e){console.log(e)})).finally((function(){t.loading=!1}))}},imgOpenFun:function(e){e.row;var t=e.index;this.$refs.imgOpen.open(this.data,t)},openVideo:function(e){var t={TypeName:e.rawName,id:e.rawId};this.$refs.videoList.open(t,2,0)},handleShowMax:function(e){this.cardShowMax=e,this.options.height="".concat(this.cardShowMax?"calc(100vh - 100px)":"232px")}}},p=d,h=n("2877"),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},f0f9:function(e,t,n){},f5b2:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var a=function(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},i=function(e){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},fa20:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dialog-container",{attrs:{title:"任务详情",width:"1200px",height:"400px",visible:e.visible,appendBody:!0,confirmText:"确认","show-footer":!1},on:{"update:visible":function(t){e.visible=t},closed:e.handleClosed,closeDialog:e.close,comfirmDialog:e.comfirmDialog}},[n("div",{staticClass:"dialog-box"},[n("div",{staticStyle:{width:"1140px",height:"600px"}},[n("el-carousel",{ref:"carousel",attrs:{trigger:"click",height:"600px",interval:1e5,"indicator-position":"none","initial-index":e.imgIndex}},e._l(e.imgData,(function(t,a){return n("el-carousel-item",{key:a},[n("el-row",{staticClass:"d2-mb",attrs:{gutter:10}},[n("ul",[n("el-col",{attrs:{span:6}},[n("li",[n("span",[e._v("任务名称")]),e._v(" :\n                  "),n("span",[e._v(e._s(t.name))])])]),n("el-col",{attrs:{span:6}},[n("li",[n("span",[e._v("摄像头")]),e._v(" :\n                  "),n("span",[e._v(e._s(t.rawName))])])]),n("el-col",{attrs:{span:6}},[n("li",[n("span",[e._v("开始时间")]),e._v(" :\n                  "),n("span",[e._v(e._s(t.startTime))])])]),n("el-col",{attrs:{span:6}},[n("li",[n("span",[e._v("结束时间")]),e._v(" :\n                  "),n("span",[e._v(e._s(t.endTime))])])]),n("el-col",{attrs:{span:6}},[n("li",[n("span",[e._v("算法名称")]),e._v(" :\n                  "),n("span",[e._v(e._s(t.algoServiceName))])])]),n("el-col",{attrs:{span:18}},[n("li",[n("span",[e._v("巡检结果")]),e._v(" :\n                  "),"合格"===e.formatValue(t)?n("span",[e._v(e._s(e.formatValue(t)))]):n("div",{staticClass:"result"},e._l(e.formatValue(t),(function(t,a){return n("ul",{key:a},e._l(t.properties,(function(a,i){return n("li",{key:a.id},[n("span",[e._v(e._s(a.sceneName))]),n("span",[e._v(e._s("("+a.sceneValueName+")")+e._s(i+1===t.properties.length?"":"，"))])])})),0)})),0)])])],1)]),e.visible?n("canvasImg",{attrs:{picUrl:t.resultPic||"",resultMark:t.resultMark?JSON.parse(t.resultMark):[]}}):e._e()],1)})),1)],1)])])},i=[],r=n("d6a8"),o={components:{canvasImg:r["a"]},data:function(){return{visible:!1,imgData:[],imgIndex:0}},computed:{},mounted:function(){},methods:{open:function(e,t){var n=this;this.imgData=e,this.$nextTick((function(){setTimeout((function(){n.$refs.carousel.setActiveItem(t)}),0)})),this.visible=!0},close:function(){this.visible=!1},formatValue:function(e){return e.resultMark?(console.log(JSON.parse(e.resultMark),8888888),JSON.parse(e.resultMark)):"合格"},handleClosed:function(){},init:function(){},comfirmDialog:function(){}}},s=o,c=(n("fdaf"),n("2877")),l=Object(c["a"])(s,a,i,!1,null,"2eccdf92",null);t["default"]=l.exports},fdaf:function(e,t,n){"use strict";n("9b22")}}]);