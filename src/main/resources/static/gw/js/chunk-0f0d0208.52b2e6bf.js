(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f0d0208","chunk-eb3d6992"],{"0f8c":function(t,e,n){},1224:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control"},[n("div",{staticClass:"direction"},[n("i",{staticClass:"el-icon-caret-top up btn",on:{mousedown:function(e){return t.handleStart("UP")},mouseup:function(e){return t.handleStop("up")}}}),n("i",{staticClass:"el-icon-caret-bottom bottom btn",on:{mousedown:function(e){return t.handleStart("DOWN")},mouseup:function(e){return t.handleStop("down")}}}),n("i",{staticClass:"el-icon-caret-left left btn",on:{mousedown:function(e){return t.handleStart("LEFT")},mouseup:function(e){return t.handleStop("left")}}}),n("i",{staticClass:"el-icon-caret-right right btn",on:{mousedown:function(e){return t.handleStart("RIGHT")},mouseup:function(e){return t.handleStop("right")}}}),n("span",{staticClass:"center-ok"})]),n("div",{staticClass:"zoom"},[n("div",{staticClass:"block"},[n("span",{staticClass:"demonstration"},[t._v("步长")]),n("el-slider",{staticClass:"block-slider",attrs:{min:1,max:8,"show-input":""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),n("div",{staticClass:"block"},[n("span",{staticClass:"demonstration"},[t._v("聚焦")]),n("el-slider",{staticClass:"block-slider",attrs:{min:0,max:10,step:.1,"show-input":""},on:{change:t.jujiao},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1),n("div",{staticClass:"block"},[n("span",{staticClass:"demonstration"},[t._v("光圈")]),n("el-slider",{staticClass:"block-slider",attrs:{min:0,max:10,step:.1,"show-input":""},on:{change:t.guangquan},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}})],1),n("div",{staticClass:"bianbei publicstyle"},[n("i",{staticClass:"el-icon-remove-outline left",on:{mousedown:function(e){return t.handleStart("ZOOM_OUT")},mouseup:function(e){return t.handleStop("stop")}}}),n("span",[t._v("变倍")]),n("i",{staticClass:"el-icon-circle-plus-outline right",on:{mousedown:function(e){return t.handleStart("ZOOM_IN")},mouseup:function(e){return t.handleStop("stop")}}})])])])},r=[],i=n("2f62"),o=n("e953"),c=n("7658");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={props:{active_item:{type:Object}},data:function(){return{value:4,value2:5,value3:5,options:[{key:1,value:1},{key:2,value:2},{key:3,value:3},{key:4,value:4},{key:5,value:5},{key:6,value:6},{key:7,value:7},{key:8,value:8}],upFlag:!0,leftFlag:!0,downFlag:!0,rightFlag:!0}},computed:l(l({},Object(i["c"])("d2admin",{themeActiveSetting:"theme/activeSetting"})),{},{bgColor:function(){return o["a"][this.themeActiveSetting.name].areaBackgroundHover}}),mounted:function(){this.jianpanBangding()},methods:{handleStart:function(t){if(!this.active_item.nodeId)return!1;var e="";e="FOCUS"===t?this.value2:"IRIS"===t?this.value3:this.value;var n={id:this.active_item.nodeId,speed:e,ptzCommandEnum:t};c["a"].ptzcontrollerStart(n).then((function(t){}))},jujiao:function(t){this.handleStart("FOCUS")},guangquan:function(t){this.handleStart("IRIS")},handleStop:function(t){if(!this.active_item.nodeId)return!1;var e={id:this.active_item.nodeId};c["a"].ptzcontrollerStop(e).then((function(t){}))},jianpanBangding:function(){var t=this;document.onkeydown=function(e){var n=e||window.event;if(!t.active_item.live)return!1;n&&38===n.keyCode&&!0===t.upFlag&&(console.log("38=上键.按下"),t.handleStart("UP"),t.upFlag=!1),n&&37===n.keyCode&&!0===t.leftFlag&&(console.log("37=左键.按下"),t.handleStart("LEFT"),t.leftFlag=!1),n&&40===n.keyCode&&!0===t.downFlag&&(console.log("40=下键.按下"),t.handleStart("DOWN"),t.downFlag=!1),n&&39===n.keyCode&&!0===t.rightFlag&&(console.log("39=右键.按下"),t.handleStart("RIGHT"),t.rightFlag=!1)},document.onkeyup=function(e){var n=e||window.event;if(!t.active_item.live)return!1;n&&38===n.keyCode&&(t.upFlag=!0,console.log("38=上键.抬起"),t.handleStop()),n&&37===n.keyCode&&(t.leftFlag=!0,console.log("37=左键.抬起"),t.handleStop()),n&&40===n.keyCode&&(t.downFlag=!0,console.log("40=下键.抬起"),t.handleStop()),n&&39===n.keyCode&&(t.rightFlag=!0,console.log("39=右键.抬起"),t.handleStop())}}},beforeDestroy:function(){document.onkeydown=function(){},document.onkeyup=function(){}}},p=d,h=(n("22ef"),n("2877")),f=Object(h["a"])(p,a,r,!1,null,null,null);e["default"]=f.exports},"1c79":function(t,e,n){"use strict";n("c92c")},"22ef":function(t,e,n){"use strict";n("0f8c")},"315e":function(t,e,n){"use strict";n("f0f9")},3709:function(t,e,n){"use strict";var a=n("9bd2"),r=VUE_APP_API_STATION,i=VUE_APP_API;e["a"]={basicInfo:function(t){return Object(a["a"])({url:"".concat(r,"/dynamicMonControl/getRawBasicBySpaceId"),method:"post",params:t})},querySpaceIns:function(t){return Object(a["a"])({url:"".concat(i,"/device/space/queryRawIns"),method:"post",data:t})},basicInfoRow:function(t){return Object(a["a"])({url:"".concat(i,"/device/raw/getRawBasicAndRawGroup/").concat(t),method:"get"})},confirmResult:function(t){return Object(a["a"])({url:"".concat(r,"/dynamicMonControl/confirmResult"),method:"post",params:t})},inspectSingleHst:function(t){return Object(a["a"])({url:"".concat(r,"/dynamicMonControl/inspectSingleHst"),method:"post",data:t})},startIdentificate:function(t){return Object(a["a"])({url:"".concat(r,"/dynamicMonControl/startIdetity"),method:"post",params:t})},getIdentityStatus:function(t){return Object(a["a"])({url:"".concat(r,"/dynamicMonControl/getIdentityStatus"),method:"post",params:t})},initializeIdentityStatus:function(t){return Object(a["a"])({url:"".concat(r,"/dynamicMonControl/initializeIdentityStatus"),method:"post",params:t})},getLatestRecord:function(t){return Object(a["a"])({url:"".concat(r,"/dynamicMonControl/getLatestRecord/").concat(t),method:"post"})},defectAnalysis:function(t){return Object(a["a"])({url:"".concat(r,"/inspection/defect/defectAnalysis/").concat(t),method:"get"})}}},"5cf4":function(t,e,n){"use strict";var a=n("9bd2"),r=VUE_APP_API_STATION,i=VUE_APP_API;e["a"]={equipmentFrame:function(t){return Object(a["a"])({url:"".concat(r,"/dynamicMonControl/getLastPonitByDevice"),method:"post",params:t})},getCharts:function(t){return Object(a["a"])({url:"".concat(i,"/real/getVarNamesValue"),method:"post",data:t})},getRawInspectionByCamaraId:function(t){return Object(a["a"])({url:"".concat(r,"/dynamicMonControl/getRawInspectionByCamaraId"),method:"post",params:t})},getSpaceByParam:function(t){return Object(a["a"])({url:"".concat(i,"/device/space/getSpaceByParam"),method:"post",data:t})}}},7658:function(t,e,n){"use strict";var a=n("9bd2"),r=VUE_APP_API_LIVE,i=VUE_APP_API_STATION,o=VUE_APP_API;e["a"]={ptzcontrollerStart:function(t){return Object(a["a"])({url:"".concat(i,"/camera/ptzcontrollerStart"),method:"post",data:t})},ptzcontrollerStop:function(t){return Object(a["a"])({url:"".concat(i,"/camera/ptzcontrollerStop"),method:"post",data:t})},getBasicsBySpaceIdAndType:function(t){return Object(a["a"])({url:"".concat(i,"/station/video/getBasicsBySpaceIdAndType"),method:"post",data:t})},getOrganizeSpaceIds:function(t){return Object(a["a"])({url:"".concat(i,"/station/video/getOrganizeSpaceIds"),method:"post",params:t})},getPageVideo:function(t){var e=t.data;return Object(a["a"])({url:"".concat(i,"/station/video/getBasicsBySpaceIdAndType?spaceId=").concat(e.spaceId,"&type=assistance_camera"),method:"get"})},startPlay:function(t){var e=t.data;return Object(a["a"])({url:"".concat(r,"/").concat(e.room,"/").concat(e.channel,"/startPlay"),method:"get"})},stopPlay:function(t){var e=t.data;return Object(a["a"])({url:"".concat(r,"/").concat(e.room,"/").concat(e.channel,"/stopPlay"),method:"get"})},ptzStart:function(t){var e=t.data;return Object(a["a"])({url:"".concat(i,"/common/sipPtzCmd?idAndChild=").concat(e.idAndChild,"&ptzcmd=").concat(e.direct),method:"get"})},eventMediaUpload:function(t){var e=t.data;return Object(a["a"])({url:"".concat(r,"/").concat(e.deviceId,"/").concat(e.evtId,"/").concat(e.protocol,"/").concat(e.type,"/eventMediaUpload"),method:"get"})},movePresetByAli:function(t){return Object(a["a"])({url:"".concat(i,"/camera/movePreset"),method:"post",data:{id:t.cameraId,presetToken:t.point}})},snapShot:function(t){return Object(a["a"])({url:"".concat(o,"/camera/snapShot"),method:"post",data:t})},getDataPointDetailYx:function(t){return Object(a["a"])({url:"".concat(o,"/device/space/queryDgtByRawId"),method:"post",data:t})},getDataPointDetailYc:function(t){return Object(a["a"])({url:"".concat(o,"/device/space/queryAnalogByRawId"),method:"post",data:t})},cameraStatus:function(t){return Object(a["a"])({url:"".concat(o,"/real/cameraStatus"),method:"post",params:t})},pauseTask:function(t){return Object(a["a"])({url:"".concat(i,"/camera/").concat(t,"/pauseTask"),method:"post"})},restartTask:function(t){return Object(a["a"])({url:"".concat(i,"/camera/").concat(t,"/restartTask"),method:"post"})},stopTask:function(t){return Object(a["a"])({url:"".concat(i,"/camera/").concat(t,"/stopTask"),method:"post"})},queryChannel:function(){return Object(a["a"])({url:"".concat(o,"/srs/queryChannel"),method:"get"})},querySession:function(){return Object(a["a"])({url:"".concat(o,"/srs/querySession"),method:"get"})},sip_invite:function(t){return Object(a["a"])({url:"".concat(VUE_APP_API_LIVE_KONG,"?action=sip_invite&id=").concat(t.id,"&chid=").concat(t.chid),method:"get"})},snapShotAndExcuteBase:function(t){return Object(a["a"])({url:"".concat(i,"/camera/snapShotAndExcuteBase"),method:"post",data:t})}}},"7dd4":function(t,e,n){},"868c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"videoClass",style:"width:"+t.widthStyle+";height:"+t.heightStyle+";"},["RTMP"===t.activeSetting.name?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"videoClass",style:"width:"+t.widthStyle+";height:"+t.heightStyle+";"},[n("div",{style:"width:"+t.widthStyle+";height:"+t.heightStyle+";",attrs:{id:"player"+t.index}}),n("div",{staticClass:"kbpsClass"},[t._v(t._s(t.kbps))]),n("flashOpen",{ref:"flashOpen"})],1):n("video",{ref:"rtc_media_player",staticStyle:{"pointer-events":"none"},style:"width:"+t.widthStyle+";height:"+t.heightStyle,attrs:{id:"rtc_media_player"+t.index,controls:"",autoplay:t.autoplay,controlslist:"nofullscreen nodownload noremoteplayback"}})])},r=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dialog-container",{attrs:{title:"flash权限快捷入口",width:"800px",visible:t.visible,"show-footer":!1,appendBody:!0},on:{"update:visible":function(e){t.visible=e},closed:t.handleClosed,closeDialog:t.close,comfirmDialog:t.comfirmDialog}},[n("div",{staticClass:"dialog-box"},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[n("p",[t._v("\n            请点击下面的图标，启用Flash\n        ")]),n("div",{staticClass:"hide",attrs:{id:"main_flash_hdr"}}),n("p",[t._v("\n            若没有见到这个图标或无法通过图标开启权限，请点击链接下载"),n("a",{staticStyle:{color:"#fff"},attrs:{href:"/video/flash_tutorial.pdf",download:"flash_tutorial.pdf"}},[t._v("flash操作指南")])])])],1)],1)])},o=[],c={components:{},data:function(){return{visible:!1}},props:{},methods:{open:function(t){var e=this;this.visible=!0,$("#main_flash_hdr").hide(),setTimeout((function(){e.playerWin()}),0)},handleClosed:function(){this.visible=!1},playerWin:function(){$("#main_flash_hdr").html('\n            <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="100%" height="100%"> \n                <param name="movie" value="srs_player/release/srs_player.swf"> \n                <param name="quality" value="autohigh"> \n                <param name="swliveconnect" value="true"> \n                <param name="allowScriptAccess" value="always"> \n                <param name="bgcolor" value="#0"> \n                <param name="allowFullScreen" value="true"> \n                <param name="wmode" value="opaque"> \n                <param name="FlashVars" value="log=1"> \n                <param name="flashvars" value="id=1&on_player_ready=__on_flash_ready"> \n                <embed src="srs_player/release/srs_player.swf" width="100%" height="100%" \n                    quality="autohigh" bgcolor="#0" align="middle" allowfullscreen="true" allowscriptaccess="always" \n                    type="application/x-shockwave-flash" swliveconnect="true" wmode="opaque" \n                    flashvars="id=1&on_player_ready=__on_flash_ready" \n                    pluginspage="http://www.macromedia.com/go/getflashplayer"> \n            </object> \n            '),$("#main_flash_hdr").show()},close:function(){this.handleClosed()},comfirmDialog:function(){}}},s=c,l=n("2877"),u=Object(l["a"])(s,i,o,!1,null,null,null),d=u.exports,p=n("7658"),h=n("2f62");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y={name:"about",components:{flashOpen:d},props:{index:{type:[Number,String],default:null},widthStyle:{type:String,default:"900px"},heightStyle:{type:String,default:"320px"},autoplay:{default:!0}},data:function(){return{loading:!1,startPlay:null,url:"",pc:null,srs_player:null,query:null,autoLoadPage:null,player:null,kbps:""}},computed:m({},Object(h["c"])("d2admin",{activeSetting:"theme/activeSetting"})),methods:{playerInit:function(){var t=this;"RTMP"===this.activeSetting.name?this.$nextTick((function(){t.srs_player=null;var e=null,n=parse_query_string();if(e=t.url,!t.srs_player){$("#div_container"+t.index).remove();var a=$("<div/>");$(a).attr("id","div_container"+t.index),$("#player"+t.index).append(a);var r=$("<div/>");$(r).attr("id","player_id"+t.index),$(a).append(r);var i=$("#player"+t.index).width(),o=$("#player"+t.index).height();t.srs_player=new SrsPlayer("player_id"+t.index,i,o),t.srs_player.on_player_ready=function(){if(e.indexOf(".m3u8")>0&&2,n.buffer)for(var t=0;t<bts.length-1;t++){var a=bts[t],r=bts[t+1];if(Number(n.buffer)>=a&&Number(n.buffer)<r){a;break}}this.play(e)},t.srs_player.on_player_timer=function(e,n,a,r,i){t.kbps=a.toFixed(0)+"kbps"},t.srs_player.start()}})):this.$nextTick((function(){t.pc=null,t.startPlay=function(){$("#rtc_media_player"+t.index).show();var e=parse_rtmp_url(t.url),n=window.location.protocol;t.pc&&t.pc.close(),t.pc=new RTCPeerConnection(null),t.pc.onaddstream=function(e){$("#rtc_media_player"+t.index).prop("srcObject",e.stream)},new Promise((function(e,n){t.pc.addTransceiver("audio",{direction:"recvonly"}),t.pc.addTransceiver("video",{direction:"recvonly"}),t.pc.createOffer((function(t){e(t)}),(function(t){n(t)}))})).then((function(e){return t.pc.setLocalDescription(e).then((function(){return e}))})).then((function(t){return new Promise((function(a,r){var i=e.port||1985,o=e.user_query.play||"/rtc/v1/play/";o.lastIndexOf("/")!==o.length-1&&(o+="/");var c=n+"//"+e.server+":"+i+o;for(var s in e.user_query)"api"!==s&&"play"!==s&&(c+="&"+s+"="+e.user_query[s]);c=c.replace(o+"&",o+"?");var l={api:c,streamurl:e.url,clientip:null,sdp:t.sdp};$.ajax({type:"POST",url:c,data:JSON.stringify(l),contentType:"application/json",dataType:"json"}).done((function(t){if(t.code)r(t);else{var o=n+"//"+e.server+":"+i+"/rtc/v1/nack/";$("#sessionid").html(t.sessionid),$("#simulator-drop").attr("href",o+"?drop=1&username="+t.sessionid),a(t.sdp)}})).fail((function(t){r(t)}))}))})).then((function(e){return t.pc.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:e}))})).catch((function(e){throw t.pc.close(),$("#rtc_media_player"+t.index).hide(),e}))},$("#rtc_media_player"+t.index).hide();var e=parse_query_string();"true"===e.autostart&&($("#rtc_media_player"+t.index).prop("muted",!0),t.startPlay())}))},playerInitWatch:function(t){var e=this;this.url=t;var n=this.url.split("/live/")[1];p["a"].queryChannel().then((function(a){var r=!1;if(a.data.map((function(t){t.id===n&&(r=!0)})),r)if("RTMP"===e.activeSetting.name){var i=e.hasUsableFlash();i||e.$refs.flashOpen.open(),e.url="rtmp://".concat(serverIp_app_live,":1935/live")+t.split("live")[1],e.playerInit()}else e.startPlay(),e.setIntervalFun();else{var o={id:n.split("@")[0],chid:n.split("@")[1]};p["a"].queryChannel(o).then((function(n){if("RTMP"===e.activeSetting.name){var a=e.hasUsableFlash();a||e.$refs.flashOpen.open(),e.url="rtmp://".concat(serverIp_app_live,":1935/live")+t.split("live")[1],e.playerInit()}else e.startPlay(),e.setIntervalFun()}))}}))},playerInitWatchCarousel:function(t){this.url=t,this.startPlay(),$("#rtc_media_player"+this.index).prop("muted",!0)},clearRtc:function(){"RTMP"===this.activeSetting.name?this.srs_player&&(this.kbps="",this.srs_player.stop(),this.srs_player=null):this.pc&&(this.pc.close(),$("#rtc_media_player"+this.index).hide())},setIntervalFun:function(){},hasUsableFlash:function(){var t;return t="undefined"!==typeof window.ActiveXObject?new ActiveXObject("ShockwaveFlash.ShockwaveFlash"):navigator.plugins["Shockwave Flash"],!!t},zhuapai:function(){var t,e,n=1;e=$("#output"),t=$("#rtc_media_player"+this.index).get(0);var a=function(){var a=document.createElement("canvas");a.width=t.videoWidth*n,a.height=t.videoHeight*n,a.getContext("2d").drawImage(t,0,0,a.width,a.height);var r=document.createElement("img");r.src=a.toDataURL(),e.prepend(r)};a()}},watch:{},mounted:function(){this.playerInit()},destroyed:function(){}},g=y,b=(n("1c79"),n("315e"),Object(l["a"])(g,a,r,!1,null,"57a62aec",null));e["a"]=b.exports},"906f":function(t,e,n){"use strict";n("7dd4")},c92c:function(t,e,n){},d6ec:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dialog-container",{staticClass:"scoped-dialog",attrs:{showFooter:!1,title:"实时视频",width:"1200PX",visible:t.visible,appendBody:!0,topHeight:"9vh"},on:{"update:visible":function(e){t.visible=e},closed:t.handleClosed}},[n("div",{staticClass:"video-sty",staticStyle:{height:"calc(75vh)",width:"80%"},attrs:{id:"player-video-box"}},[n("div",{staticClass:"tou-kuang",on:{dblclick:t.clikFullScreen}}),t.visible?n("player",{ref:"player",staticClass:"dplayer",attrs:{url:t.addrSrc,widthStyle:"100%",heightStyle:"100%"}}):t._e()],1),n("div",{staticClass:"video-sty",staticStyle:{height:"650px",width:"20%"},style:{height:t.cardShowMax?"calc(100vh - 80px)":"calc(75vh)"}},[2===t.type?n("div",{staticClass:"data-point"},[n("h3",[t._v(t._s(t.cameraData.TypeName))]),n("div",t._l(t.pointData,(function(e,a){return n("span",{key:e.id,class:{active:a===t.current},on:{click:function(n){return t.getVideoInfo(e,a)}}},[n("i",{staticClass:"el-icon-video-camera-solid"}),t._v("\n        "+t._s(e.name))])})),0)]):t._e(),1===t.type?n("div",{staticClass:"data-point"},[n("h3",[t._v(t._s(t.devTreeNode.name||t.transformer.TypeName))]),n("div",t._l(t.pointOneData,(function(e,a){return n("span",{key:e.id,class:{active:a===t.current},on:{click:function(n){return t.getVideoInfo(e,a)}}},[n("i",{staticClass:"el-icon-video-camera-solid"}),t._v("\n        "+t._s(e.spaceVarName)+"\n       ")])})),0)]):t._e(),n("contory",{staticStyle:{height:"55%"},attrs:{active_item:t.active_item}})],1)])},r=[],i=n("868c"),o=n("1224"),c=n("7658"),s=n("2f62"),l=n("3709"),u=n("5cf4"),d=n("f5b2");function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m={components:{player:i["a"],contory:o["default"]},data:function(){return{cardShowMax:!1,visible:!1,addrSrc:"",active_item:{},pointData:[],pointOneData:[],row:null,type:null,current:-1,transformer:{},cameraData:{},fullScreen:!1}},computed:h(h({},Object(s["c"])("d2admin",{devTreeNode:"tree/devTreeNode"})),{},{devId:function(){return this.devTreeNode.id}}),watch:{},methods:{getVideoInfo:function(t,e){this.current=e,1===this.type?(this.row=t,this.getBasicInfo(1)):this.goPreset(t.id,t.spaceId)},getBasicInfo:function(t,e){var n=this,a=1===t?this.row.rawId:this.cameraData.id;l["a"].basicInfo({rawId:a,type:t}).then((function(t){if(t&&t.data){n.basicInfo=t.data,n.basicInfo.map((function(t){"devNum"===t.url?n.channel=t.name:"channelNum"===t.url?n.addId=t.name:"id"===t.url&&(n.active_item.nodeId=t.name)}));var r="webrtc://".concat(serverIp_app_live,"/live/").concat(n.channel,"@").concat(n.addId);r!==n.addrSrc&&(n.addrSrc=r,n.videoPlayer()),n.active_item.live="".concat(n.channel,"@").concat(n.addId),e||n.goPreset(a,n.active_item.nodeId)}})).finally((function(){}))},videoPlayer:function(){var t=this;setTimeout((function(){t.$refs.player.playerInitWatch(t.addrSrc)}),0)},goPreset:function(t,e){l["a"].querySpaceIns({id:t}).then((function(t){if(t&&t.data.length){var n={cameraId:e,point:t.data[0].token};c["a"].movePresetByAli(n).then((function(t){}))}}))},open:function(t,e,n){var a=this;this.visible=!0,this.type=e,this.$nextTick((function(){2===e?(a.cameraData=t,a.getCameraPoint(e)):1===e&&a.getDevPoint(e,n)}))},sendData:function(t,e,n){this.transformer=t,this.current=n,this.type=e,this.open(this.devTreeNode,e,n)},getCameraPoint:function(t){var e=this;u["a"].getRawInspectionByCamaraId({id:this.cameraData.id}).then((function(n){n&&n.data.length&&(e.pointData=n.data,e.getBasicInfo(t),e.row=e.pointData[0],e.current=0)}))},cardRefresh:function(){},getDevPoint:function(t,e){var n=this;u["a"].equipmentFrame({id:this.transformer.id||this.devId}).then((function(a){a&&a.data&&a.data.length&&(n.pointOneData=a.data,n.row=n.pointOneData[e],n.getBasicInfo(t,!1))}))},handleShowMax:function(t){this.cardShowMax=t},clikFullScreen:function(){var t=document.getElementById("player-video-box");this.fullScreen?Object(d["a"])(t):Object(d["b"])(t)},clearData:function(){this.cardShowMax=!1,this.visible=!1,this.addrSrc="",this.active_item={},this.pointData=[],this.row=null,this.type=null,this.current=-1,this.transformer={},this.cameraData={},this.pointOneData=[],this.$refs.player&&this.$refs.player.clearRtc()},handleClosed:function(){this.clearData(),this.$refs.player&&this.$refs.player.clearRtc()}},mounted:function(){var t=this;window.onresize=function(){t.fullScreen=!t.fullScreen}}},v=m,y=(n("906f"),n("2877")),g=Object(y["a"])(v,a,r,!1,null,"424bcc77",null);e["default"]=g.exports},f0f9:function(t,e,n){},f5b2:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r}));var a=function(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},r=function(t){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}}}]);