(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59520204"],{1627:function(t,a,e){},2303:function(t,a,e){},2692:function(t,a,e){"use strict";e("1627")},"34d1":function(t,a,e){},"63d9":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("d2-card",{staticClass:"box-card",on:{handleShowMax:t.handleShowMax}},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("i",{staticClass:"fa fa-hourglass-2"}),e("span",[t._v("巡检结果")])]),t.data.length?e("el-carousel",{ref:"carousel",attrs:{trigger:"click",height:t.cardShowMax?"calc(100vh - 40px)":"322px","indicator-position":"none",interval:5e3},on:{change:t.handleChange}},t._l(t.data,(function(a,n){return e("el-carousel-item",{key:n},[e("div",{staticClass:"video-block",on:{dblclick:function(a){return t.dbVideoClick(n)}}},[e("canvasImg",{attrs:{picUrl:a.resultPic||"",fontSize:"16",resultMark:a.resultMark?JSON.parse(a.resultMark):[]}})],1)])})),1):e("noData",{style:{height:"290px"}})],1)},s=[],i=e("cbe7"),r=e("d6a8"),l=e("8e01"),c=e("f5b2"),o=e("06c5"),d={name:"app-manage",components:{canvasImg:r["a"],noData:l["a"]},props:{carouselImgData:{type:Array}},mixins:[o["a"]],data:function(){return{data:[],videoData:[],playerArr:[],taskId:"",isClose:!0,isBig:!1,times:setInterval((function(){}),2e3)}},computed:{},watch:{carouselImgData:{deep:!0,handler:function(t,a){var e=this;this.data=[],this.$nextTick((function(){e.carouselImgData.map((function(t){t.resultPic&&e.data.push(t)}))}))}}},created:function(){},mounted:function(){var t=this;window.onresize=function(){t.isClose=!t.isClose,t.isBig=!t.isBig}},methods:{getTaskId:function(t){this.taskId},getappList:function(){var t=this;this.loading=!0;var a={recordsId:this.taskId,descList:["1","2","3"]};this.data=[],i["a"].getRecordItemList(a).then((function(a){a.data.map((function(a){a.resultPic&&t.data.push(a)}))})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1}))},playerVideo:function(){var t=this;this.clearAll(),this.videoData=[],this.playerArr=[];var a=0;this.data.map((function(e,n){var s={};e.rawBasicVo.map((function(t){"devNum"===t.url?s.devNum=t.name:"channelNum"===t.url?s.channelNum=t.name:"id"===t.url?(s.id=t.name,s.nodeId=t.name):"name"===t.url&&(s.name=t.name)})),s.live=s.channelNum+"@"+s.devNum,s.addrSrc="webrtc://".concat(serverIp_app_live,"/live/").concat(s.devNum,"@").concat(s.channelNum),t.videoData.indexOf(s.addrSrc)>-1||(t.videoData.push(s.addrSrc),t.videoData.length-1<3&&t.videoPlayer(t.videoData.length-1,s.addrSrc),"2"===e.desc&&(a=t.videoData.length-1))})),this.$nextTick((function(){setTimeout((function(){t.$refs.carousel.setActiveItem(a)}),0)}))},videoPlayer:function(t,a){var e=this;-1===this.playerArr.indexOf(a)&&(this.playerArr.push(a),setTimeout((function(){e.$refs["player"+t][0].playerInitWatchCarousel(e.videoData[t])}),0))},handleChange:function(t){},dbVideoClick:function(t){var a=document.getElementsByClassName("video-block")[t];this.isClose?Object(c["a"])(a):Object(c["b"])(a)},clearAll:function(){var t=this;this.videoData.map((function(a,e){t.$refs["player"+e][0].clearRtc()}))}},beforeDestroy:function(){this.clearAll(),clearInterval(this.times)}},u=d,f=(e("2692"),e("2877")),m=Object(f["a"])(u,n,s,!1,null,"2870d057",null);a["default"]=m.exports},"8e01":function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:[1===t.flag?"no-data2":2===t.flag?"no-data3":3===t.flag?"no-data4":4===t.flag?"no-data5":5===t.flag?"no-data6":6===t.flag?"no-data7":"no-data"]},[t._v("\n  暂无数据\n")])},s=[],i={props:{flag:Number}},r=i,l=(e("bd36"),e("2877")),c=Object(l["a"])(r,n,s,!1,null,null,null);a["a"]=c.exports},bd36:function(t,a,e){"use strict";e("34d1")},bdfe:function(t,a,e){"use strict";e("2303")},ee24:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("d2-container",[e("template",{slot:"header"},[e("el-breadcrumb",[e("el-breadcrumb-item",[t._v("当前位置")]),e("el-breadcrumb-item",[t._v("智能巡检")]),e("el-breadcrumb-item",{attrs:{to:{path:"/refresh"}}},[t._v("巡检监控")])],1)],1),e("el-row",{staticClass:"d2-mr",attrs:{gutter:10}},[e("el-col",{staticClass:"d2-mb",attrs:{span:24}},[e("d2-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("i",{staticClass:"fa fa-tasks"}),e("span",[t._v("主任务列表")]),e("div",{staticClass:"d2-card-button-group right-btn"},[e("el-form",{staticClass:"d2-form",attrs:{"label-position":"right",inline:!0,"label-width":"50px"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-form-item",[e("el-date-picker",{attrs:{type:"date",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()>Date.now()}},"value-format":"yyyy-MM-dd"},model:{value:t.time,callback:function(a){t.time=a},expression:"time"}})],1)],1)],1)]),e("gantTable",{ref:"gantTable",attrs:{time:t.time},on:{taskClick:t.taskClick}})],1)],1),e("el-col",{attrs:{span:16}},[e("taskTable",{ref:"taskTable",attrs:{taskId:t.taskId},on:{emitImageData:t.emitImageData}})],1),e("el-col",{attrs:{span:8}},[e("video-carousel",{ref:"videoCarousel",attrs:{taskId:t.taskId,carouselImgData:t.carouselImgData}})],1)],1)],2)},s=[],i=e("373a"),r=e("df94"),l=e("63d9"),c=e("6f62"),o={name:"app-manage",components:{gantTable:i["default"],taskTable:r["default"],VideoCarousel:l["default"]},mixins:[],data:function(){return{taskId:"",carouselImgData:[],time:Object(c["d"])("d")}},computed:{},created:function(){},mounted:function(){},methods:{taskClick:function(t,a){"定时器"!==a&&(this.taskId=t),this.$refs.taskTable.getappList(this.taskId),this.$refs.videoCarousel.getTaskId(this.taskId),this.carouselImgData=[]},gettaskTable:function(){},getvideoTable:function(){},emitImageData:function(t){this.carouselImgData=t}}},d=o,u=(e("bdfe"),e("2877")),f=Object(u["a"])(d,n,s,!1,null,"d259f4be",null);a["default"]=f.exports}}]);