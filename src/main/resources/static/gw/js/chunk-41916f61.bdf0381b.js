(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41916f61","chunk-eb3d6992"],{"0f8c":function(e,t,a){},1224:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"control"},[a("div",{staticClass:"direction"},[a("i",{staticClass:"el-icon-caret-top up btn",on:{mousedown:function(t){return e.handleStart("UP")},mouseup:function(t){return e.handleStop("up")}}}),a("i",{staticClass:"el-icon-caret-bottom bottom btn",on:{mousedown:function(t){return e.handleStart("DOWN")},mouseup:function(t){return e.handleStop("down")}}}),a("i",{staticClass:"el-icon-caret-left left btn",on:{mousedown:function(t){return e.handleStart("LEFT")},mouseup:function(t){return e.handleStop("left")}}}),a("i",{staticClass:"el-icon-caret-right right btn",on:{mousedown:function(t){return e.handleStart("RIGHT")},mouseup:function(t){return e.handleStop("right")}}}),a("span",{staticClass:"center-ok"})]),a("div",{staticClass:"zoom"},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("步长")]),a("el-slider",{staticClass:"block-slider",attrs:{min:1,max:8,"show-input":""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("聚焦")]),a("el-slider",{staticClass:"block-slider",attrs:{min:0,max:10,step:.1,"show-input":""},on:{change:e.jujiao},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("光圈")]),a("el-slider",{staticClass:"block-slider",attrs:{min:0,max:10,step:.1,"show-input":""},on:{change:e.guangquan},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}})],1),a("div",{staticClass:"bianbei publicstyle"},[a("i",{staticClass:"el-icon-remove-outline left",on:{mousedown:function(t){return e.handleStart("ZOOM_OUT")},mouseup:function(t){return e.handleStop("stop")}}}),a("span",[e._v("变倍")]),a("i",{staticClass:"el-icon-circle-plus-outline right",on:{mousedown:function(t){return e.handleStart("ZOOM_IN")},mouseup:function(t){return e.handleStop("stop")}}})])])])},r=[],i=a("2f62"),o=a("e953"),c=a("7658");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d={props:{active_item:{type:Object}},data:function(){return{value:4,value2:5,value3:5,options:[{key:1,value:1},{key:2,value:2},{key:3,value:3},{key:4,value:4},{key:5,value:5},{key:6,value:6},{key:7,value:7},{key:8,value:8}],upFlag:!0,leftFlag:!0,downFlag:!0,rightFlag:!0}},computed:l(l({},Object(i["c"])("d2admin",{themeActiveSetting:"theme/activeSetting"})),{},{bgColor:function(){return o["a"][this.themeActiveSetting.name].areaBackgroundHover}}),mounted:function(){this.jianpanBangding()},methods:{handleStart:function(e){if(!this.active_item.nodeId)return!1;var t="";t="FOCUS"===e?this.value2:"IRIS"===e?this.value3:this.value;var a={id:this.active_item.nodeId,speed:t,ptzCommandEnum:e};c["a"].ptzcontrollerStart(a).then((function(e){}))},jujiao:function(e){this.handleStart("FOCUS")},guangquan:function(e){this.handleStart("IRIS")},handleStop:function(e){if(!this.active_item.nodeId)return!1;var t={id:this.active_item.nodeId};c["a"].ptzcontrollerStop(t).then((function(e){}))},jianpanBangding:function(){var e=this;document.onkeydown=function(t){var a=t||window.event;if(!e.active_item.live)return!1;a&&38===a.keyCode&&!0===e.upFlag&&(console.log("38=上键.按下"),e.handleStart("UP"),e.upFlag=!1),a&&37===a.keyCode&&!0===e.leftFlag&&(console.log("37=左键.按下"),e.handleStart("LEFT"),e.leftFlag=!1),a&&40===a.keyCode&&!0===e.downFlag&&(console.log("40=下键.按下"),e.handleStart("DOWN"),e.downFlag=!1),a&&39===a.keyCode&&!0===e.rightFlag&&(console.log("39=右键.按下"),e.handleStart("RIGHT"),e.rightFlag=!1)},document.onkeyup=function(t){var a=t||window.event;if(!e.active_item.live)return!1;a&&38===a.keyCode&&(e.upFlag=!0,console.log("38=上键.抬起"),e.handleStop()),a&&37===a.keyCode&&(e.leftFlag=!0,console.log("37=左键.抬起"),e.handleStop()),a&&40===a.keyCode&&(e.downFlag=!0,console.log("40=下键.抬起"),e.handleStop()),a&&39===a.keyCode&&(e.rightFlag=!0,console.log("39=右键.抬起"),e.handleStop())}}},beforeDestroy:function(){document.onkeydown=function(){},document.onkeyup=function(){}}},p=d,h=(a("22ef"),a("2877")),f=Object(h["a"])(p,n,r,!1,null,null,null);t["default"]=f.exports},"1c79":function(e,t,a){"use strict";a("c92c")},"22ef":function(e,t,a){"use strict";a("0f8c")},"315e":function(e,t,a){"use strict";a("f0f9")},5019:function(e,t,a){"use strict";a("913d")},7658:function(e,t,a){"use strict";var n=a("9bd2"),r=VUE_APP_API_LIVE,i=VUE_APP_API_STATION,o=VUE_APP_API;t["a"]={ptzcontrollerStart:function(e){return Object(n["a"])({url:"".concat(i,"/camera/ptzcontrollerStart"),method:"post",data:e})},ptzcontrollerStop:function(e){return Object(n["a"])({url:"".concat(i,"/camera/ptzcontrollerStop"),method:"post",data:e})},getBasicsBySpaceIdAndType:function(e){return Object(n["a"])({url:"".concat(i,"/station/video/getBasicsBySpaceIdAndType"),method:"post",data:e})},getOrganizeSpaceIds:function(e){return Object(n["a"])({url:"".concat(i,"/station/video/getOrganizeSpaceIds"),method:"post",params:e})},getPageVideo:function(e){var t=e.data;return Object(n["a"])({url:"".concat(i,"/station/video/getBasicsBySpaceIdAndType?spaceId=").concat(t.spaceId,"&type=assistance_camera"),method:"get"})},startPlay:function(e){var t=e.data;return Object(n["a"])({url:"".concat(r,"/").concat(t.room,"/").concat(t.channel,"/startPlay"),method:"get"})},stopPlay:function(e){var t=e.data;return Object(n["a"])({url:"".concat(r,"/").concat(t.room,"/").concat(t.channel,"/stopPlay"),method:"get"})},ptzStart:function(e){var t=e.data;return Object(n["a"])({url:"".concat(i,"/common/sipPtzCmd?idAndChild=").concat(t.idAndChild,"&ptzcmd=").concat(t.direct),method:"get"})},eventMediaUpload:function(e){var t=e.data;return Object(n["a"])({url:"".concat(r,"/").concat(t.deviceId,"/").concat(t.evtId,"/").concat(t.protocol,"/").concat(t.type,"/eventMediaUpload"),method:"get"})},movePresetByAli:function(e){return Object(n["a"])({url:"".concat(i,"/camera/movePreset"),method:"post",data:{id:e.cameraId,presetToken:e.point}})},snapShot:function(e){return Object(n["a"])({url:"".concat(o,"/camera/snapShot"),method:"post",data:e})},getDataPointDetailYx:function(e){return Object(n["a"])({url:"".concat(o,"/device/space/queryDgtByRawId"),method:"post",data:e})},getDataPointDetailYc:function(e){return Object(n["a"])({url:"".concat(o,"/device/space/queryAnalogByRawId"),method:"post",data:e})},cameraStatus:function(e){return Object(n["a"])({url:"".concat(o,"/real/cameraStatus"),method:"post",params:e})},pauseTask:function(e){return Object(n["a"])({url:"".concat(i,"/camera/").concat(e,"/pauseTask"),method:"post"})},restartTask:function(e){return Object(n["a"])({url:"".concat(i,"/camera/").concat(e,"/restartTask"),method:"post"})},stopTask:function(e){return Object(n["a"])({url:"".concat(i,"/camera/").concat(e,"/stopTask"),method:"post"})},queryChannel:function(){return Object(n["a"])({url:"".concat(o,"/srs/queryChannel"),method:"get"})},querySession:function(){return Object(n["a"])({url:"".concat(o,"/srs/querySession"),method:"get"})},sip_invite:function(e){return Object(n["a"])({url:"".concat(VUE_APP_API_LIVE_KONG,"?action=sip_invite&id=").concat(e.id,"&chid=").concat(e.chid),method:"get"})},snapShotAndExcuteBase:function(e){return Object(n["a"])({url:"".concat(i,"/camera/snapShotAndExcuteBase"),method:"post",data:e})}}},"868c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"videoClass",style:"width:"+e.widthStyle+";height:"+e.heightStyle+";"},["RTMP"===e.activeSetting.name?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"videoClass",style:"width:"+e.widthStyle+";height:"+e.heightStyle+";"},[a("div",{style:"width:"+e.widthStyle+";height:"+e.heightStyle+";",attrs:{id:"player"+e.index}}),a("div",{staticClass:"kbpsClass"},[e._v(e._s(e.kbps))]),a("flashOpen",{ref:"flashOpen"})],1):a("video",{ref:"rtc_media_player",staticStyle:{"pointer-events":"none"},style:"width:"+e.widthStyle+";height:"+e.heightStyle,attrs:{id:"rtc_media_player"+e.index,controls:"",autoplay:e.autoplay,controlslist:"nofullscreen nodownload noremoteplayback"}})])},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dialog-container",{attrs:{title:"flash权限快捷入口",width:"800px",visible:e.visible,"show-footer":!1,appendBody:!0},on:{"update:visible":function(t){e.visible=t},closed:e.handleClosed,closeDialog:e.close,comfirmDialog:e.comfirmDialog}},[a("div",{staticClass:"dialog-box"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("p",[e._v("\n            请点击下面的图标，启用Flash\n        ")]),a("div",{staticClass:"hide",attrs:{id:"main_flash_hdr"}}),a("p",[e._v("\n            若没有见到这个图标或无法通过图标开启权限，请点击链接下载"),a("a",{staticStyle:{color:"#fff"},attrs:{href:"/video/flash_tutorial.pdf",download:"flash_tutorial.pdf"}},[e._v("flash操作指南")])])])],1)],1)])},o=[],c={components:{},data:function(){return{visible:!1}},props:{},methods:{open:function(e){var t=this;this.visible=!0,$("#main_flash_hdr").hide(),setTimeout((function(){t.playerWin()}),0)},handleClosed:function(){this.visible=!1},playerWin:function(){$("#main_flash_hdr").html('\n            <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="100%" height="100%"> \n                <param name="movie" value="srs_player/release/srs_player.swf"> \n                <param name="quality" value="autohigh"> \n                <param name="swliveconnect" value="true"> \n                <param name="allowScriptAccess" value="always"> \n                <param name="bgcolor" value="#0"> \n                <param name="allowFullScreen" value="true"> \n                <param name="wmode" value="opaque"> \n                <param name="FlashVars" value="log=1"> \n                <param name="flashvars" value="id=1&on_player_ready=__on_flash_ready"> \n                <embed src="srs_player/release/srs_player.swf" width="100%" height="100%" \n                    quality="autohigh" bgcolor="#0" align="middle" allowfullscreen="true" allowscriptaccess="always" \n                    type="application/x-shockwave-flash" swliveconnect="true" wmode="opaque" \n                    flashvars="id=1&on_player_ready=__on_flash_ready" \n                    pluginspage="http://www.macromedia.com/go/getflashplayer"> \n            </object> \n            '),$("#main_flash_hdr").show()},close:function(){this.handleClosed()},comfirmDialog:function(){}}},s=c,l=a("2877"),u=Object(l["a"])(s,i,o,!1,null,null,null),d=u.exports,p=a("7658"),h=a("2f62");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var y={name:"about",components:{flashOpen:d},props:{index:{type:[Number,String],default:null},widthStyle:{type:String,default:"900px"},heightStyle:{type:String,default:"320px"},autoplay:{default:!0}},data:function(){return{loading:!1,startPlay:null,url:"",pc:null,srs_player:null,query:null,autoLoadPage:null,player:null,kbps:""}},computed:m({},Object(h["c"])("d2admin",{activeSetting:"theme/activeSetting"})),methods:{playerInit:function(){var e=this;"RTMP"===this.activeSetting.name?this.$nextTick((function(){e.srs_player=null;var t=null,a=parse_query_string();if(t=e.url,!e.srs_player){$("#div_container"+e.index).remove();var n=$("<div/>");$(n).attr("id","div_container"+e.index),$("#player"+e.index).append(n);var r=$("<div/>");$(r).attr("id","player_id"+e.index),$(n).append(r);var i=$("#player"+e.index).width(),o=$("#player"+e.index).height();e.srs_player=new SrsPlayer("player_id"+e.index,i,o),e.srs_player.on_player_ready=function(){if(t.indexOf(".m3u8")>0&&2,a.buffer)for(var e=0;e<bts.length-1;e++){var n=bts[e],r=bts[e+1];if(Number(a.buffer)>=n&&Number(a.buffer)<r){n;break}}this.play(t)},e.srs_player.on_player_timer=function(t,a,n,r,i){e.kbps=n.toFixed(0)+"kbps"},e.srs_player.start()}})):this.$nextTick((function(){e.pc=null,e.startPlay=function(){$("#rtc_media_player"+e.index).show();var t=parse_rtmp_url(e.url),a=window.location.protocol;e.pc&&e.pc.close(),e.pc=new RTCPeerConnection(null),e.pc.onaddstream=function(t){$("#rtc_media_player"+e.index).prop("srcObject",t.stream)},new Promise((function(t,a){e.pc.addTransceiver("audio",{direction:"recvonly"}),e.pc.addTransceiver("video",{direction:"recvonly"}),e.pc.createOffer((function(e){t(e)}),(function(e){a(e)}))})).then((function(t){return e.pc.setLocalDescription(t).then((function(){return t}))})).then((function(e){return new Promise((function(n,r){var i=t.port||1985,o=t.user_query.play||"/rtc/v1/play/";o.lastIndexOf("/")!==o.length-1&&(o+="/");var c=a+"//"+t.server+":"+i+o;for(var s in t.user_query)"api"!==s&&"play"!==s&&(c+="&"+s+"="+t.user_query[s]);c=c.replace(o+"&",o+"?");var l={api:c,streamurl:t.url,clientip:null,sdp:e.sdp};$.ajax({type:"POST",url:c,data:JSON.stringify(l),contentType:"application/json",dataType:"json"}).done((function(e){if(e.code)r(e);else{var o=a+"//"+t.server+":"+i+"/rtc/v1/nack/";$("#sessionid").html(e.sessionid),$("#simulator-drop").attr("href",o+"?drop=1&username="+e.sessionid),n(e.sdp)}})).fail((function(e){r(e)}))}))})).then((function(t){return e.pc.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:t}))})).catch((function(t){throw e.pc.close(),$("#rtc_media_player"+e.index).hide(),t}))},$("#rtc_media_player"+e.index).hide();var t=parse_query_string();"true"===t.autostart&&($("#rtc_media_player"+e.index).prop("muted",!0),e.startPlay())}))},playerInitWatch:function(e){var t=this;this.url=e;var a=this.url.split("/live/")[1];p["a"].queryChannel().then((function(n){var r=!1;if(n.data.map((function(e){e.id===a&&(r=!0)})),r)if("RTMP"===t.activeSetting.name){var i=t.hasUsableFlash();i||t.$refs.flashOpen.open(),t.url="rtmp://".concat(serverIp_app_live,":1935/live")+e.split("live")[1],t.playerInit()}else t.startPlay(),t.setIntervalFun();else{var o={id:a.split("@")[0],chid:a.split("@")[1]};p["a"].queryChannel(o).then((function(a){if("RTMP"===t.activeSetting.name){var n=t.hasUsableFlash();n||t.$refs.flashOpen.open(),t.url="rtmp://".concat(serverIp_app_live,":1935/live")+e.split("live")[1],t.playerInit()}else t.startPlay(),t.setIntervalFun()}))}}))},playerInitWatchCarousel:function(e){this.url=e,this.startPlay(),$("#rtc_media_player"+this.index).prop("muted",!0)},clearRtc:function(){"RTMP"===this.activeSetting.name?this.srs_player&&(this.kbps="",this.srs_player.stop(),this.srs_player=null):this.pc&&(this.pc.close(),$("#rtc_media_player"+this.index).hide())},setIntervalFun:function(){},hasUsableFlash:function(){var e;return e="undefined"!==typeof window.ActiveXObject?new ActiveXObject("ShockwaveFlash.ShockwaveFlash"):navigator.plugins["Shockwave Flash"],!!e},zhuapai:function(){var e,t,a=1;t=$("#output"),e=$("#rtc_media_player"+this.index).get(0);var n=function(){var n=document.createElement("canvas");n.width=e.videoWidth*a,n.height=e.videoHeight*a,n.getContext("2d").drawImage(e,0,0,n.width,n.height);var r=document.createElement("img");r.src=n.toDataURL(),t.prepend(r)};n()}},watch:{},mounted:function(){this.playerInit()},destroyed:function(){}},g=y,b=(a("1c79"),a("315e"),Object(l["a"])(g,n,r,!1,null,"57a62aec",null));t["a"]=b.exports},"913d":function(e,t,a){},"932d":function(e,t,a){"use strict";var n=a("9bd2"),r=VUE_APP_API_STATION;t["a"]={stationBasic:function(e){return Object(n["a"])({url:"".concat(r,"/inspectOverview/stationBasic"),method:"post",params:e})},runStatics:function(e){return Object(n["a"])({url:"".concat(r,"/inspectOverview/runStatics"),method:"post",params:e})},accessStatics:function(e){return Object(n["a"])({url:"".concat(r,"/inspectOverview/accessStatics"),method:"post",params:e})},accessStaticsFrame:function(e){return Object(n["a"])({url:"".concat(r,"/inspectOverview/accessStaticsFrame"),method:"post",params:e})},realDetail:function(e){return Object(n["a"])({url:"".concat(r,"/homePage/realDetail"),method:"post",data:e})},taskOverview:function(e){return Object(n["a"])({url:"".concat(r,"/inspectOverview/taskOverview"),method:"post",params:e})},taskOverviewOfFrame:function(e){return Object(n["a"])({url:"".concat(r,"/inspectOverview/taskOverviewOfFrame"),method:"post",data:e})},onOffLine:function(){return Object(n["a"])({url:"".concat(r,"/inspectOverview/onOffLine"),method:"post",data:{}})},algorithmStatistics:function(e){return Object(n["a"])({url:"".concat(r,"/inspectOverview/algorithmStatistics"),method:"post",data:e})},algorithmStatisticsOfFrame:function(e){return Object(n["a"])({url:"".concat(r,"/inspectOverview/algorithmStatisticsOfFrame"),method:"post",params:e})},resourceOccupation:function(e){return Object(n["a"])({url:"".concat(r,"/inspectOverview/resourceOccupation"),method:"post",params:e})},resourceOccupationGpu:function(){return Object(n["a"])({url:"".concat(r,"/inspectOverview/resourceOccupationGpu"),method:"post",params:{}})},getCamaraBasicBymainStationId:function(e){return Object(n["a"])({url:"".concat(r,"/dynamicMonControl/getCamaraBasicBymainStationId"),method:"post",params:e})},defectStatics:function(){return Object(n["a"])({url:"".concat(r,"/inspectOverview/defectStatics"),method:"post",data:{}})},defectStaticsByMethodType:function(){return Object(n["a"])({url:"".concat(r,"/inspectOverview/defectStaticsByMethodType"),method:"post",data:{}})},defectStaticsFrame:function(e){return Object(n["a"])({url:"".concat(r,"/inspectOverview/defectStaticsFrame"),method:"post",data:e})},alarmLevel:function(){return Object(n["a"])({url:"".concat(r,"/inspectOverview/alarmLevel"),method:"post",data:{}})},alarmType:function(){return Object(n["a"])({url:"".concat(r,"/inspectOverview/alarmType"),method:"post",data:{}})},alarmLevelGroupByLevelFrame:function(e){return Object(n["a"])({url:"".concat(r,"/inspectOverview/alarmLevelGroupByLevelFrame"),method:"post",data:e})},alarmTrend:function(){return Object(n["a"])({url:"".concat(r,"/inspectOverview/alarmTrend"),method:"post",params:{}})},getCamaraBasicBymainSt1ationId:function(e){return Object(n["a"])({url:"".concat(r,"/dynamicMonControl/getCamaraBasicBymainStationId"),method:"post",params:e})},alarmCommon:function(e){return Object(n["a"])({url:"".concat(r,"/homePage/alarmCommon"),method:"post",data:e})}}},c239:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"real-time-video"},[a("el-row",{staticClass:"h-100",attrs:{gutter:10}},[a("el-col",{staticClass:"h-100 main-page",attrs:{span:20}},[a("player",{ref:"player",staticClass:"dplayer",attrs:{url:e.addrSrc,widthStyle:"100%",heightStyle:"100%"}})],1),a("el-col",{staticClass:"h-100",attrs:{span:4}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"treeFollow",staticClass:"video-tree",attrs:{props:e.defaultProps,data:e.treeData,"node-key":"id","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","default-expand-all":!1,"expand-on-click-node":!1,"render-content":e.renderContent,"highlight-current":!0},on:{"node-click":e.handleNodeClick}}),a("control",{ref:"control",attrs:{active_item:e.active_item}})],1)],1)],1)},r=[],i=a("1224"),o=a("868c"),c=a("2f62"),s=a("7658"),l=a("932d");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h={name:"real-time-video",components:{player:o["a"],control:i["default"]},data:function(){return{classId:null,active_item:{},addrSrc:"",defaultProps:{label:"name",id:"id"},loading:!1,treeData:[],videoNode:{},MouseEvent:null,controlFlag:!1}},computed:d(d(d({},Object(c["e"])("d2admin/tree",["treeNode"])),Object(c["c"])("d2admin",{treeNode:"tree/treeNode",treeType:"tree/treeType"})),{},{deviceId:function(){var e=this.treeNode.id;return e}}),watch:{deviceId:function(){this.deviceId&&(this.classId=[this.deviceId],"2"===this.treeType&&"orgnaize"===this.treeNode.type?this.getClassVideo(this.deviceId):(this.stopAction(),this.tableInit()))}},mounted:function(){var e=this;this.$nextTick((function(){e.tableInit()}))},methods:{getClassVideo:function(e){var t=this,a={id:e};this.treeData=[],s["a"].getOrganizeSpaceIds(a).then((function(e){t.items.length>0&&t.stopAction(),e&&e.data&&e.data.length&&(t.classId=e.data,t.tableInit())}))},renderContent:function(e,t){var a=t.node,n=t.data;t.store;return e("span",{class:"custom-tree-node",attrs:{id:"node"+n.id}},[e("span",[e("i",{class:"treeIcon shexiangtou"}),a.label])])},tableInit:function(){var e=this,t={id:this.classId||this.deviceId||this.treeNode.id,isSafe:1};this.treeData=[],l["a"].getCamaraBasicBymainStationId(t).then((function(t){var a=function(a){var n={};t.data[a].map((function(e){"devNum"===e.url?n.devNum=e.name:"channelNum"===e.url?n.channelNum=e.name:"id"===e.url?(n.id=e.name,n.nodeId=e.name):"name"===e.url&&(n.name=e.name)})),n.live=n.devNum+"@"+n.channelNum,n.addrSrc="webrtc://".concat(serverIp_app_live,"/live/").concat(n.live),e.treeData.push(n)};for(var n in t.data)a(n)}))},videoPlayer:function(){var e=this;setTimeout((function(){e.$refs["player"+(e.activeVideo-1)][0].playerInitWatch(e.videoArray[e.activeVideo-1].addrSrc)}),0)},playerOpen:function(e){var t=this;setTimeout((function(){t.$refs.player.playerInitWatch(e.addrSrc)}),0),this.active_item=e},stopAction:function(){},handleNodeClick:function(e,t,a){this.videoNode=e,this.MouseEvent=a.$el.childNodes[0].childNodes[0];var n=this.active_item.id===this.videoNode.id;if(n)return!1;this.playerOpen(this.videoNode)}},beforeDestroy:function(){this.$refs.player.clearRtc()}},f=h,m=(a("5019"),a("2877")),v=Object(m["a"])(f,n,r,!1,null,"fe03b326",null);t["default"]=v.exports},c92c:function(e,t,a){},f0f9:function(e,t,a){}}]);