(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b897398","chunk-0f0d0208","chunk-eb3d6992","chunk-4dd8f1e1","chunk-2d0b723e"],{"0f8c":function(e,t,a){},1224:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"control"},[a("div",{staticClass:"direction"},[a("i",{staticClass:"el-icon-caret-top up btn",on:{mousedown:function(t){return e.handleStart("UP")},mouseup:function(t){return e.handleStop("up")}}}),a("i",{staticClass:"el-icon-caret-bottom bottom btn",on:{mousedown:function(t){return e.handleStart("DOWN")},mouseup:function(t){return e.handleStop("down")}}}),a("i",{staticClass:"el-icon-caret-left left btn",on:{mousedown:function(t){return e.handleStart("LEFT")},mouseup:function(t){return e.handleStop("left")}}}),a("i",{staticClass:"el-icon-caret-right right btn",on:{mousedown:function(t){return e.handleStart("RIGHT")},mouseup:function(t){return e.handleStop("right")}}}),a("span",{staticClass:"center-ok"})]),a("div",{staticClass:"zoom"},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("步长")]),a("el-slider",{staticClass:"block-slider",attrs:{min:1,max:8,"show-input":""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("聚焦")]),a("el-slider",{staticClass:"block-slider",attrs:{min:0,max:10,step:.1,"show-input":""},on:{change:e.jujiao},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("光圈")]),a("el-slider",{staticClass:"block-slider",attrs:{min:0,max:10,step:.1,"show-input":""},on:{change:e.guangquan},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}})],1),a("div",{staticClass:"bianbei publicstyle"},[a("i",{staticClass:"el-icon-remove-outline left",on:{mousedown:function(t){return e.handleStart("ZOOM_OUT")},mouseup:function(t){return e.handleStop("stop")}}}),a("span",[e._v("变倍")]),a("i",{staticClass:"el-icon-circle-plus-outline right",on:{mousedown:function(t){return e.handleStart("ZOOM_IN")},mouseup:function(t){return e.handleStop("stop")}}})])])])},r=[],i=a("2f62"),o=a("e953"),c=a("7658");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d={props:{active_item:{type:Object}},data:function(){return{value:4,value2:5,value3:5,options:[{key:1,value:1},{key:2,value:2},{key:3,value:3},{key:4,value:4},{key:5,value:5},{key:6,value:6},{key:7,value:7},{key:8,value:8}],upFlag:!0,leftFlag:!0,downFlag:!0,rightFlag:!0}},computed:s(s({},Object(i["c"])("d2admin",{themeActiveSetting:"theme/activeSetting"})),{},{bgColor:function(){return o["a"][this.themeActiveSetting.name].areaBackgroundHover}}),mounted:function(){this.jianpanBangding()},methods:{handleStart:function(e){if(!this.active_item.nodeId)return!1;var t="";t="FOCUS"===e?this.value2:"IRIS"===e?this.value3:this.value;var a={id:this.active_item.nodeId,speed:t,ptzCommandEnum:e};c["a"].ptzcontrollerStart(a).then((function(e){}))},jujiao:function(e){this.handleStart("FOCUS")},guangquan:function(e){this.handleStart("IRIS")},handleStop:function(e){if(!this.active_item.nodeId)return!1;var t={id:this.active_item.nodeId};c["a"].ptzcontrollerStop(t).then((function(e){}))},jianpanBangding:function(){var e=this;document.onkeydown=function(t){var a=t||window.event;if(!e.active_item.live)return!1;a&&38===a.keyCode&&!0===e.upFlag&&(console.log("38=上键.按下"),e.handleStart("UP"),e.upFlag=!1),a&&37===a.keyCode&&!0===e.leftFlag&&(console.log("37=左键.按下"),e.handleStart("LEFT"),e.leftFlag=!1),a&&40===a.keyCode&&!0===e.downFlag&&(console.log("40=下键.按下"),e.handleStart("DOWN"),e.downFlag=!1),a&&39===a.keyCode&&!0===e.rightFlag&&(console.log("39=右键.按下"),e.handleStart("RIGHT"),e.rightFlag=!1)},document.onkeyup=function(t){var a=t||window.event;if(!e.active_item.live)return!1;a&&38===a.keyCode&&(e.upFlag=!0,console.log("38=上键.抬起"),e.handleStop()),a&&37===a.keyCode&&(e.leftFlag=!0,console.log("37=左键.抬起"),e.handleStop()),a&&40===a.keyCode&&(e.downFlag=!0,console.log("40=下键.抬起"),e.handleStop()),a&&39===a.keyCode&&(e.rightFlag=!0,console.log("39=右键.抬起"),e.handleStop())}}},beforeDestroy:function(){document.onkeydown=function(){},document.onkeyup=function(){}}},p=d,h=(a("22ef"),a("2877")),f=Object(h["a"])(p,n,r,!1,null,null,null);t["default"]=f.exports},"1c79":function(e,t,a){"use strict";a("c92c")},"1fc6":function(e,t,a){"use strict";a.r(t),t["default"]={data:function(){var e=this;return{data:[],columns:[{title:"序号",key:"",width:60,formatter:function(t,a,n,r){return(e.pagination.currentPage-1)*e.pagination.pageSize+(r+1)}},{title:"摄像头",key:"rawName",component:{render:function(t,a){return t("div",{style:{cursor:"pointer",width:"100%",color:"#00c0ff"},domProps:{innerHTML:a.rawName},on:{click:function(){e.openVideo(a)}}})}}},{title:"任务名称",key:"recordName",showOverflowTooltip:!0},{title:"工作状态",key:"desc",showOverflowTooltip:!0,formatter:function(t,a,n,r){var i="";return e.taskStateOptions.forEach((function(e){n===e.value&&(i=e.label)})),i}},{title:"当前巡检内容",key:"desc",showOverflowTooltip:!0}],loading:!1,pagination:{currentPage:1,pageSize:4,total:0},options:{stripe:!0,height:"242px",border:!0}}}}},"22ef":function(e,t,a){"use strict";a("0f8c")},"315e":function(e,t,a){"use strict";a("f0f9")},3709:function(e,t,a){"use strict";var n=a("9bd2"),r=VUE_APP_API_STATION,i=VUE_APP_API;t["a"]={basicInfo:function(e){return Object(n["a"])({url:"".concat(r,"/dynamicMonControl/getRawBasicBySpaceId"),method:"post",params:e})},querySpaceIns:function(e){return Object(n["a"])({url:"".concat(i,"/device/space/queryRawIns"),method:"post",data:e})},basicInfoRow:function(e){return Object(n["a"])({url:"".concat(i,"/device/raw/getRawBasicAndRawGroup/").concat(e),method:"get"})},confirmResult:function(e){return Object(n["a"])({url:"".concat(r,"/dynamicMonControl/confirmResult"),method:"post",params:e})},inspectSingleHst:function(e){return Object(n["a"])({url:"".concat(r,"/dynamicMonControl/inspectSingleHst"),method:"post",data:e})},startIdentificate:function(e){return Object(n["a"])({url:"".concat(r,"/dynamicMonControl/startIdetity"),method:"post",params:e})},getIdentityStatus:function(e){return Object(n["a"])({url:"".concat(r,"/dynamicMonControl/getIdentityStatus"),method:"post",params:e})},initializeIdentityStatus:function(e){return Object(n["a"])({url:"".concat(r,"/dynamicMonControl/initializeIdentityStatus"),method:"post",params:e})},getLatestRecord:function(e){return Object(n["a"])({url:"".concat(r,"/dynamicMonControl/getLatestRecord/").concat(e),method:"post"})},defectAnalysis:function(e){return Object(n["a"])({url:"".concat(r,"/inspection/defect/defectAnalysis/").concat(e),method:"get"})}}},"5cf4":function(e,t,a){"use strict";var n=a("9bd2"),r=VUE_APP_API_STATION,i=VUE_APP_API;t["a"]={equipmentFrame:function(e){return Object(n["a"])({url:"".concat(r,"/dynamicMonControl/getLastPonitByDevice"),method:"post",params:e})},getCharts:function(e){return Object(n["a"])({url:"".concat(i,"/real/getVarNamesValue"),method:"post",data:e})},getRawInspectionByCamaraId:function(e){return Object(n["a"])({url:"".concat(r,"/dynamicMonControl/getRawInspectionByCamaraId"),method:"post",params:e})},getSpaceByParam:function(e){return Object(n["a"])({url:"".concat(i,"/device/space/getSpaceByParam"),method:"post",data:e})}}},7110:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("摄像头列表")])]),a("d2-crud",{ref:"d2Crud",attrs:{columns:e.columns,data:e.data,loading:e.loading,options:e.options,pagination:e.pagination},on:{"pagination-current-change":e.paginationCurrentChange}}),a("video-list",{ref:"videoList"})],1)},r=[],i=a("9951"),o=a("1fc6"),c=a("cbe7"),l=a("d6ec"),s={name:"app-manage",components:{videoList:l["default"]},mixins:[i["a"],o["default"]],data:function(){return{}},computed:{},created:function(){this.getappList()},mounted:function(){},methods:{paginationCurrentChange:function(e){this.pagination.currentPage=e,this.getappList()},puery:function(){this.pagination.currentPage=1,this.getappList()},getappList:function(){var e=this;this.loading=!0;var t={current:this.pagination.currentPage,size:this.pagination.pageSize,sortOrder:this.pagination.sortOrder,sortName:this.pagination.sortName};this.data=[],c["a"].getRecordExecutorPage(t).then((function(t){e.data=t.data.records,e.pagination.total=t.data.total})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1}))},openVideo:function(e){var t={TypeName:e.rawName,id:e.id};this.$refs.videoList.open(t,2,0)}}},u=s,d=a("2877"),p=Object(d["a"])(u,n,r,!1,null,null,null);t["default"]=p.exports},7658:function(e,t,a){"use strict";var n=a("9bd2"),r=VUE_APP_API_LIVE,i=VUE_APP_API_STATION,o=VUE_APP_API;t["a"]={ptzcontrollerStart:function(e){return Object(n["a"])({url:"".concat(i,"/camera/ptzcontrollerStart"),method:"post",data:e})},ptzcontrollerStop:function(e){return Object(n["a"])({url:"".concat(i,"/camera/ptzcontrollerStop"),method:"post",data:e})},getBasicsBySpaceIdAndType:function(e){return Object(n["a"])({url:"".concat(i,"/station/video/getBasicsBySpaceIdAndType"),method:"post",data:e})},getOrganizeSpaceIds:function(e){return Object(n["a"])({url:"".concat(i,"/station/video/getOrganizeSpaceIds"),method:"post",params:e})},getPageVideo:function(e){var t=e.data;return Object(n["a"])({url:"".concat(i,"/station/video/getBasicsBySpaceIdAndType?spaceId=").concat(t.spaceId,"&type=assistance_camera"),method:"get"})},startPlay:function(e){var t=e.data;return Object(n["a"])({url:"".concat(r,"/").concat(t.room,"/").concat(t.channel,"/startPlay"),method:"get"})},stopPlay:function(e){var t=e.data;return Object(n["a"])({url:"".concat(r,"/").concat(t.room,"/").concat(t.channel,"/stopPlay"),method:"get"})},ptzStart:function(e){var t=e.data;return Object(n["a"])({url:"".concat(i,"/common/sipPtzCmd?idAndChild=").concat(t.idAndChild,"&ptzcmd=").concat(t.direct),method:"get"})},eventMediaUpload:function(e){var t=e.data;return Object(n["a"])({url:"".concat(r,"/").concat(t.deviceId,"/").concat(t.evtId,"/").concat(t.protocol,"/").concat(t.type,"/eventMediaUpload"),method:"get"})},movePresetByAli:function(e){return Object(n["a"])({url:"".concat(i,"/camera/movePreset"),method:"post",data:{id:e.cameraId,presetToken:e.point}})},snapShot:function(e){return Object(n["a"])({url:"".concat(o,"/camera/snapShot"),method:"post",data:e})},getDataPointDetailYx:function(e){return Object(n["a"])({url:"".concat(o,"/device/space/queryDgtByRawId"),method:"post",data:e})},getDataPointDetailYc:function(e){return Object(n["a"])({url:"".concat(o,"/device/space/queryAnalogByRawId"),method:"post",data:e})},cameraStatus:function(e){return Object(n["a"])({url:"".concat(o,"/real/cameraStatus"),method:"post",params:e})},pauseTask:function(e){return Object(n["a"])({url:"".concat(i,"/camera/").concat(e,"/pauseTask"),method:"post"})},restartTask:function(e){return Object(n["a"])({url:"".concat(i,"/camera/").concat(e,"/restartTask"),method:"post"})},stopTask:function(e){return Object(n["a"])({url:"".concat(i,"/camera/").concat(e,"/stopTask"),method:"post"})},queryChannel:function(){return Object(n["a"])({url:"".concat(o,"/srs/queryChannel"),method:"get"})},querySession:function(){return Object(n["a"])({url:"".concat(o,"/srs/querySession"),method:"get"})},sip_invite:function(e){return Object(n["a"])({url:"".concat(VUE_APP_API_LIVE_KONG,"?action=sip_invite&id=").concat(e.id,"&chid=").concat(e.chid),method:"get"})},snapShotAndExcuteBase:function(e){return Object(n["a"])({url:"".concat(i,"/camera/snapShotAndExcuteBase"),method:"post",data:e})}}},"7dd4":function(e,t,a){},"868c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"videoClass",style:"width:"+e.widthStyle+";height:"+e.heightStyle+";"},["RTMP"===e.activeSetting.name?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"videoClass",style:"width:"+e.widthStyle+";height:"+e.heightStyle+";"},[a("div",{style:"width:"+e.widthStyle+";height:"+e.heightStyle+";",attrs:{id:"player"+e.index}}),a("div",{staticClass:"kbpsClass"},[e._v(e._s(e.kbps))]),a("flashOpen",{ref:"flashOpen"})],1):a("video",{ref:"rtc_media_player",staticStyle:{"pointer-events":"none"},style:"width:"+e.widthStyle+";height:"+e.heightStyle,attrs:{id:"rtc_media_player"+e.index,controls:"",autoplay:e.autoplay,controlslist:"nofullscreen nodownload noremoteplayback"}})])},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dialog-container",{attrs:{title:"flash权限快捷入口",width:"800px",visible:e.visible,"show-footer":!1,appendBody:!0},on:{"update:visible":function(t){e.visible=t},closed:e.handleClosed,closeDialog:e.close,comfirmDialog:e.comfirmDialog}},[a("div",{staticClass:"dialog-box"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("p",[e._v("\n            请点击下面的图标，启用Flash\n        ")]),a("div",{staticClass:"hide",attrs:{id:"main_flash_hdr"}}),a("p",[e._v("\n            若没有见到这个图标或无法通过图标开启权限，请点击链接下载"),a("a",{staticStyle:{color:"#fff"},attrs:{href:"/video/flash_tutorial.pdf",download:"flash_tutorial.pdf"}},[e._v("flash操作指南")])])])],1)],1)])},o=[],c={components:{},data:function(){return{visible:!1}},props:{},methods:{open:function(e){var t=this;this.visible=!0,$("#main_flash_hdr").hide(),setTimeout((function(){t.playerWin()}),0)},handleClosed:function(){this.visible=!1},playerWin:function(){$("#main_flash_hdr").html('\n            <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="100%" height="100%"> \n                <param name="movie" value="srs_player/release/srs_player.swf"> \n                <param name="quality" value="autohigh"> \n                <param name="swliveconnect" value="true"> \n                <param name="allowScriptAccess" value="always"> \n                <param name="bgcolor" value="#0"> \n                <param name="allowFullScreen" value="true"> \n                <param name="wmode" value="opaque"> \n                <param name="FlashVars" value="log=1"> \n                <param name="flashvars" value="id=1&on_player_ready=__on_flash_ready"> \n                <embed src="srs_player/release/srs_player.swf" width="100%" height="100%" \n                    quality="autohigh" bgcolor="#0" align="middle" allowfullscreen="true" allowscriptaccess="always" \n                    type="application/x-shockwave-flash" swliveconnect="true" wmode="opaque" \n                    flashvars="id=1&on_player_ready=__on_flash_ready" \n                    pluginspage="http://www.macromedia.com/go/getflashplayer"> \n            </object> \n            '),$("#main_flash_hdr").show()},close:function(){this.handleClosed()},comfirmDialog:function(){}}},l=c,s=a("2877"),u=Object(s["a"])(l,i,o,!1,null,null,null),d=u.exports,p=a("7658"),h=a("2f62");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){m(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var y={name:"about",components:{flashOpen:d},props:{index:{type:[Number,String],default:null},widthStyle:{type:String,default:"900px"},heightStyle:{type:String,default:"320px"},autoplay:{default:!0}},data:function(){return{loading:!1,startPlay:null,url:"",pc:null,srs_player:null,query:null,autoLoadPage:null,player:null,kbps:""}},computed:v({},Object(h["c"])("d2admin",{activeSetting:"theme/activeSetting"})),methods:{playerInit:function(){var e=this;"RTMP"===this.activeSetting.name?this.$nextTick((function(){e.srs_player=null;var t=null,a=parse_query_string();if(t=e.url,!e.srs_player){$("#div_container"+e.index).remove();var n=$("<div/>");$(n).attr("id","div_container"+e.index),$("#player"+e.index).append(n);var r=$("<div/>");$(r).attr("id","player_id"+e.index),$(n).append(r);var i=$("#player"+e.index).width(),o=$("#player"+e.index).height();e.srs_player=new SrsPlayer("player_id"+e.index,i,o),e.srs_player.on_player_ready=function(){if(t.indexOf(".m3u8")>0&&2,a.buffer)for(var e=0;e<bts.length-1;e++){var n=bts[e],r=bts[e+1];if(Number(a.buffer)>=n&&Number(a.buffer)<r){n;break}}this.play(t)},e.srs_player.on_player_timer=function(t,a,n,r,i){e.kbps=n.toFixed(0)+"kbps"},e.srs_player.start()}})):this.$nextTick((function(){e.pc=null,e.startPlay=function(){$("#rtc_media_player"+e.index).show();var t=parse_rtmp_url(e.url),a=window.location.protocol;e.pc&&e.pc.close(),e.pc=new RTCPeerConnection(null),e.pc.onaddstream=function(t){$("#rtc_media_player"+e.index).prop("srcObject",t.stream)},new Promise((function(t,a){e.pc.addTransceiver("audio",{direction:"recvonly"}),e.pc.addTransceiver("video",{direction:"recvonly"}),e.pc.createOffer((function(e){t(e)}),(function(e){a(e)}))})).then((function(t){return e.pc.setLocalDescription(t).then((function(){return t}))})).then((function(e){return new Promise((function(n,r){var i=t.port||1985,o=t.user_query.play||"/rtc/v1/play/";o.lastIndexOf("/")!==o.length-1&&(o+="/");var c=a+"//"+t.server+":"+i+o;for(var l in t.user_query)"api"!==l&&"play"!==l&&(c+="&"+l+"="+t.user_query[l]);c=c.replace(o+"&",o+"?");var s={api:c,streamurl:t.url,clientip:null,sdp:e.sdp};$.ajax({type:"POST",url:c,data:JSON.stringify(s),contentType:"application/json",dataType:"json"}).done((function(e){if(e.code)r(e);else{var o=a+"//"+t.server+":"+i+"/rtc/v1/nack/";$("#sessionid").html(e.sessionid),$("#simulator-drop").attr("href",o+"?drop=1&username="+e.sessionid),n(e.sdp)}})).fail((function(e){r(e)}))}))})).then((function(t){return e.pc.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:t}))})).catch((function(t){throw e.pc.close(),$("#rtc_media_player"+e.index).hide(),t}))},$("#rtc_media_player"+e.index).hide();var t=parse_query_string();"true"===t.autostart&&($("#rtc_media_player"+e.index).prop("muted",!0),e.startPlay())}))},playerInitWatch:function(e){var t=this;this.url=e;var a=this.url.split("/live/")[1];p["a"].queryChannel().then((function(n){var r=!1;if(n.data.map((function(e){e.id===a&&(r=!0)})),r)if("RTMP"===t.activeSetting.name){var i=t.hasUsableFlash();i||t.$refs.flashOpen.open(),t.url="rtmp://".concat(serverIp_app_live,":1935/live")+e.split("live")[1],t.playerInit()}else t.startPlay(),t.setIntervalFun();else{var o={id:a.split("@")[0],chid:a.split("@")[1]};p["a"].queryChannel(o).then((function(a){if("RTMP"===t.activeSetting.name){var n=t.hasUsableFlash();n||t.$refs.flashOpen.open(),t.url="rtmp://".concat(serverIp_app_live,":1935/live")+e.split("live")[1],t.playerInit()}else t.startPlay(),t.setIntervalFun()}))}}))},playerInitWatchCarousel:function(e){this.url=e,this.startPlay(),$("#rtc_media_player"+this.index).prop("muted",!0)},clearRtc:function(){"RTMP"===this.activeSetting.name?this.srs_player&&(this.kbps="",this.srs_player.stop(),this.srs_player=null):this.pc&&(this.pc.close(),$("#rtc_media_player"+this.index).hide())},setIntervalFun:function(){},hasUsableFlash:function(){var e;return e="undefined"!==typeof window.ActiveXObject?new ActiveXObject("ShockwaveFlash.ShockwaveFlash"):navigator.plugins["Shockwave Flash"],!!e},zhuapai:function(){var e,t,a=1;t=$("#output"),e=$("#rtc_media_player"+this.index).get(0);var n=function(){var n=document.createElement("canvas");n.width=e.videoWidth*a,n.height=e.videoHeight*a,n.getContext("2d").drawImage(e,0,0,n.width,n.height);var r=document.createElement("img");r.src=n.toDataURL(),t.prepend(r)};n()}},watch:{},mounted:function(){this.playerInit()},destroyed:function(){}},g=y,b=(a("1c79"),a("315e"),Object(s["a"])(g,n,r,!1,null,"57a62aec",null));t["a"]=b.exports},"906f":function(e,t,a){"use strict";a("7dd4")},9951:function(e,t,a){"use strict";t["a"]={data:function(){return{implementOptions:[{value:1,label:"立即"},{value:2,label:"定时"},{value:3,label:"周期"}],taskStateOptions:[{value:6,label:"手动停止"},{value:5,label:"等待执行"},{value:4,label:"正在执行"},{value:3,label:"任务暂停"},{value:2,label:"异常终止"},{value:1,label:"已完成"}],taskTypeOptions:[{value:"1",label:"例行巡视"},{value:"2",label:"特殊巡视"},{value:"3",label:"专项巡视"},{value:"4",label:"自定义巡视"}],timeOptions:[{value:"1",label:"每天"},{value:"2",label:"每周"},{value:"3",label:"每月"}],monthOptions:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"},{value:"13",label:"13"},{value:"14",label:"14"},{value:"15",label:"15"},{value:"16",label:"16"},{value:"17",label:"17"},{value:"18",label:"18"},{value:"19",label:"19"},{value:"20",label:"20"},{value:"21",label:"21"},{value:"22",label:"22"},{value:"23",label:"23"},{value:"24",label:"24"},{value:"25",label:"25"},{value:"26",label:"26"},{value:"27",label:"27"},{value:"28",label:"28"},{value:"29",label:"29"},{value:"30",label:"30"},{value:"31",label:"31"}],weekOptions:[{value:"1",label:"周一"},{value:"2",label:"周二"},{value:"3",label:"周三"},{value:"4",label:"周四"},{value:"5",label:"周五"},{value:"6",label:"周六"},{value:"7",label:"周日"}],warningOptions:[{value:1,label:"是"},{value:0,label:"否"}],addrFormat:{"power-infra-gloves-detection":"未带手套","helmet-classify":"未带安全帽"}}}}},c92c:function(e,t,a){},cbe7:function(e,t,a){"use strict";var n=a("9bd2"),r=VUE_APP_API_STATION;t["a"]={getRecordList:function(e){return Object(n["a"])({url:"".concat(r,"/inspection/record/getRecordList"),method:"post",data:e})},getRecordItemPage:function(e){return Object(n["a"])({url:"".concat(r,"/evt/list/").concat(e.current,"/").concat(e.size),method:"get"})},getRecordItemList:function(e){return Object(n["a"])({url:"".concat(r,"/inspection/recordItem/getRecordItemList"),method:"post",data:e})},getRecordExecutorPage:function(e){return Object(n["a"])({url:"".concat(r,"/inspection/recordExecutor/getRecordExecutorPage"),method:"post",data:e})},getRecordById:function(e){return Object(n["a"])({url:"".concat(r,"/inspection/record/getRecordById/").concat(e),method:"post"})},getModelCount:function(e){return Object(n["a"])({url:"".concat(r,"/getModelCount"),method:"get"})},getEvtCount:function(e){return Object(n["a"])({url:"".concat(r,"/evt/getEvtCount"),method:"get"})},getRealHumTmp:function(){return Object(n["a"])({url:"".concat(r,"/real/getRealHumTmp"),method:"get"})}}},d6ec:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dialog-container",{staticClass:"scoped-dialog",attrs:{showFooter:!1,title:"实时视频",width:"1200PX",visible:e.visible,appendBody:!0,topHeight:"9vh"},on:{"update:visible":function(t){e.visible=t},closed:e.handleClosed}},[a("div",{staticClass:"video-sty",staticStyle:{height:"calc(75vh)",width:"80%"},attrs:{id:"player-video-box"}},[a("div",{staticClass:"tou-kuang",on:{dblclick:e.clikFullScreen}}),e.visible?a("player",{ref:"player",staticClass:"dplayer",attrs:{url:e.addrSrc,widthStyle:"100%",heightStyle:"100%"}}):e._e()],1),a("div",{staticClass:"video-sty",staticStyle:{height:"650px",width:"20%"},style:{height:e.cardShowMax?"calc(100vh - 80px)":"calc(75vh)"}},[2===e.type?a("div",{staticClass:"data-point"},[a("h3",[e._v(e._s(e.cameraData.TypeName))]),a("div",e._l(e.pointData,(function(t,n){return a("span",{key:t.id,class:{active:n===e.current},on:{click:function(a){return e.getVideoInfo(t,n)}}},[a("i",{staticClass:"el-icon-video-camera-solid"}),e._v("\n        "+e._s(t.name))])})),0)]):e._e(),1===e.type?a("div",{staticClass:"data-point"},[a("h3",[e._v(e._s(e.devTreeNode.name||e.transformer.TypeName))]),a("div",e._l(e.pointOneData,(function(t,n){return a("span",{key:t.id,class:{active:n===e.current},on:{click:function(a){return e.getVideoInfo(t,n)}}},[a("i",{staticClass:"el-icon-video-camera-solid"}),e._v("\n        "+e._s(t.spaceVarName)+"\n       ")])})),0)]):e._e(),a("contory",{staticStyle:{height:"55%"},attrs:{active_item:e.active_item}})],1)])},r=[],i=a("868c"),o=a("1224"),c=a("7658"),l=a("2f62"),s=a("3709"),u=a("5cf4"),d=a("f5b2");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var v={components:{player:i["a"],contory:o["default"]},data:function(){return{cardShowMax:!1,visible:!1,addrSrc:"",active_item:{},pointData:[],pointOneData:[],row:null,type:null,current:-1,transformer:{},cameraData:{},fullScreen:!1}},computed:h(h({},Object(l["c"])("d2admin",{devTreeNode:"tree/devTreeNode"})),{},{devId:function(){return this.devTreeNode.id}}),watch:{},methods:{getVideoInfo:function(e,t){this.current=t,1===this.type?(this.row=e,this.getBasicInfo(1)):this.goPreset(e.id,e.spaceId)},getBasicInfo:function(e,t){var a=this,n=1===e?this.row.rawId:this.cameraData.id;s["a"].basicInfo({rawId:n,type:e}).then((function(e){if(e&&e.data){a.basicInfo=e.data,a.basicInfo.map((function(e){"devNum"===e.url?a.channel=e.name:"channelNum"===e.url?a.addId=e.name:"id"===e.url&&(a.active_item.nodeId=e.name)}));var r="webrtc://".concat(serverIp_app_live,"/live/").concat(a.channel,"@").concat(a.addId);r!==a.addrSrc&&(a.addrSrc=r,a.videoPlayer()),a.active_item.live="".concat(a.channel,"@").concat(a.addId),t||a.goPreset(n,a.active_item.nodeId)}})).finally((function(){}))},videoPlayer:function(){var e=this;setTimeout((function(){e.$refs.player.playerInitWatch(e.addrSrc)}),0)},goPreset:function(e,t){s["a"].querySpaceIns({id:e}).then((function(e){if(e&&e.data.length){var a={cameraId:t,point:e.data[0].token};c["a"].movePresetByAli(a).then((function(e){}))}}))},open:function(e,t,a){var n=this;this.visible=!0,this.type=t,this.$nextTick((function(){2===t?(n.cameraData=e,n.getCameraPoint(t)):1===t&&n.getDevPoint(t,a)}))},sendData:function(e,t,a){this.transformer=e,this.current=a,this.type=t,this.open(this.devTreeNode,t,a)},getCameraPoint:function(e){var t=this;u["a"].getRawInspectionByCamaraId({id:this.cameraData.id}).then((function(a){a&&a.data.length&&(t.pointData=a.data,t.getBasicInfo(e),t.row=t.pointData[0],t.current=0)}))},cardRefresh:function(){},getDevPoint:function(e,t){var a=this;u["a"].equipmentFrame({id:this.transformer.id||this.devId}).then((function(n){n&&n.data&&n.data.length&&(a.pointOneData=n.data,a.row=a.pointOneData[t],a.getBasicInfo(e,!1))}))},handleShowMax:function(e){this.cardShowMax=e},clikFullScreen:function(){var e=document.getElementById("player-video-box");this.fullScreen?Object(d["a"])(e):Object(d["b"])(e)},clearData:function(){this.cardShowMax=!1,this.visible=!1,this.addrSrc="",this.active_item={},this.pointData=[],this.row=null,this.type=null,this.current=-1,this.transformer={},this.cameraData={},this.pointOneData=[],this.$refs.player&&this.$refs.player.clearRtc()},handleClosed:function(){this.clearData(),this.$refs.player&&this.$refs.player.clearRtc()}},mounted:function(){var e=this;window.onresize=function(){e.fullScreen=!e.fullScreen}}},m=v,y=(a("906f"),a("2877")),g=Object(y["a"])(m,n,r,!1,null,"424bcc77",null);t["default"]=g.exports},f0f9:function(e,t,a){},f5b2:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},r=function(e){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}}}]);