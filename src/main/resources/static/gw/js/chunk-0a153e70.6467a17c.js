(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a153e70"],{"747e":function(e,t,a){"use strict";a("faff")},9951:function(e,t,a){"use strict";t["a"]={data:function(){return{implementOptions:[{value:1,label:"立即"},{value:2,label:"定时"},{value:3,label:"周期"}],taskStateOptions:[{value:6,label:"手动停止"},{value:5,label:"等待执行"},{value:4,label:"正在执行"},{value:3,label:"任务暂停"},{value:2,label:"异常终止"},{value:1,label:"已完成"}],taskTypeOptions:[{value:"1",label:"例行巡视"},{value:"2",label:"特殊巡视"},{value:"3",label:"专项巡视"},{value:"4",label:"自定义巡视"}],timeOptions:[{value:"1",label:"每天"},{value:"2",label:"每周"},{value:"3",label:"每月"}],monthOptions:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"},{value:"13",label:"13"},{value:"14",label:"14"},{value:"15",label:"15"},{value:"16",label:"16"},{value:"17",label:"17"},{value:"18",label:"18"},{value:"19",label:"19"},{value:"20",label:"20"},{value:"21",label:"21"},{value:"22",label:"22"},{value:"23",label:"23"},{value:"24",label:"24"},{value:"25",label:"25"},{value:"26",label:"26"},{value:"27",label:"27"},{value:"28",label:"28"},{value:"29",label:"29"},{value:"30",label:"30"},{value:"31",label:"31"}],weekOptions:[{value:"1",label:"周一"},{value:"2",label:"周二"},{value:"3",label:"周三"},{value:"4",label:"周四"},{value:"5",label:"周五"},{value:"6",label:"周六"},{value:"7",label:"周日"}],warningOptions:[{value:1,label:"是"},{value:0,label:"否"}],addrFormat:{"power-infra-gloves-detection":"未带手套","helmet-classify":"未带安全帽"}}}}},e1e5:function(e,t,a){"use strict";var n=a("9bd2"),l=VUE_APP_API,i=VUE_APP_API_STATION;t["a"]={nodeGetById:function(e){return Object(n["a"])({url:"".concat(l,"/device/space/getById/").concat(e),method:"get"})},deleteInspectTaskById:function(e){return Object(n["a"])({url:"".concat(i,"/inspection/task/deleteInspectTaskById/").concat(e),method:"delete"})},saveInspectTask:function(e){return Object(n["a"])({url:"".concat(i,"/inspection/task/saveInspectTask"),method:"post",data:e})},updateInspectTask:function(e){return Object(n["a"])({url:"".concat(i,"/inspection/task/updateInspectTask"),method:"put",data:e})},getPageInspectTask:function(e){return Object(n["a"])({url:"".concat(i,"/inspection/task/getPageInspectTask"),method:"post",data:e})},getInspectTaskById:function(e){return Object(n["a"])({url:"".concat(i,"/inspection/task/getInspectTaskById"),method:"post",data:e})},startTask:function(e){return Object(n["a"])({url:"".concat(i,"/inspection/record/startTask"),method:"post",data:e})},getCameraPoint:function(e){return Object(n["a"])({url:"".concat(l,"/device/space/getInspectionPointById"),method:"post",params:e})},getCameraPointType:function(e){return Object(n["a"])({url:"".concat(l,"/device/space/getInspectionPointById?id=").concat(e.id,"&nodeTypeList=").concat(e.nodeTypeList[0],"&nodeTypeList=").concat(e.nodeTypeList[1]),method:"post"})},getCalendar:function(e){return Object(n["a"])({url:"".concat(i,"/inspection/task/getCalendar"),method:"post",data:e})},getYear:function(e){return Object(n["a"])({url:"".concat(i,"/inspection/task/getYear"),method:"post",data:e})}}},e581:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dialog-container",{attrs:{title:"检修区设置",width:"800px",height:"400px",visible:e.visible,submitLoading:e.submitLoading,confirmText:"确定","show-footer":!0},on:{"update:visible":function(t){e.visible=t},closed:e.handleClosed,closeDialog:e.close,comfirmDialog:e.comfirmDialog}},[a("div",{staticClass:"dialog-box"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("d2-card",{staticClass:"box-card",attrs:{showRightRefreshBtn:!1,showRightMaxBtn:!1}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("请选择检修区点位")])]),e.visible?a("el-tree",e._b({ref:"treeDevice",staticClass:"d2-tree-main",staticStyle:{height:"486px","overflow-y":"auto","overflow-x":"hidden"},attrs:{"node-key":"id",load:e.loadNode,data:e.primaryData,lazy:"",props:e.defaultProps,"expand-on-click-node":!1,"render-content":e.renderContent,"highlight-current":""},on:{"node-click":e.handleNodeClickDevice}},"el-tree",e.$attrs,!1)):e._e()],1)],1),a("el-col",{attrs:{span:12}},[a("d2-card",{staticClass:"box-card",attrs:{showRightRefreshBtn:!1,showRightMaxBtn:!1}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("已选检修区点位列表")])]),e.visible?a("el-tree",{ref:"treeltxj",staticClass:"d2-tree-main",staticStyle:{height:"486px","overflow-y":"auto","overflow-x":"hidden"},attrs:{"node-key":"id",data:e.ltxjData,props:e.defaultPropsDv,"render-content":e.renderContentLtxj,"highlight-current":""}}):e._e()],1)],1)],1)],1)])},l=[],i=a("e1e5"),o=a("9951"),s=a("2f62");function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={components:{},mixins:[o["a"]],data:function(){return{visible:!1,submitLoading:!1,loading:!1,treeData:[],primaryData:[{name:"primary"}],defaultProps:{children:"children",label:"name",id:"id",isLeaf:"leaf"},defaultPropsDv:{label:"varName",id:"varId"},ltxjData:[],treeClickCount:0,isSelectList:[]}},computed:c(c({},Object(s["c"])("d2admin",{treeNode:"tree/treeNode"})),{},{deviceId:function(){var e=this.treeNode.id;return e}}),watch:{},mounted:function(){},methods:{open:function(){this.isSelectList=[],this.init()},close:function(){this.visible=!1},handleClosed:function(){var e=this;this.$nextTick((function(){e.$refs.ruleForm.resetFields(),e.ltxjData=[]}))},init:function(){this.visible=!0},renderContent:function(e,t){var a=t.node,n=t.data,l=(t.store,"");return n.isSelect&&(l="el-icon-check"),e("span",{class:"custom-tree-node",attrs:{id:"node"+n.id}},[e("span",[e("i",{class:l,style:"color: #4EC752;float: left;margin-right: 5px;font-size: 16px;font-weight: 700;"}),e("i",{class:n.icon?"treeIcon "+n.icon:""}),a.label])])},renderContentLtxj:function(e,t){var a=this,n=t.node,l=t.data;t.store;return"details"===this.pageType?e("span",{class:"custom-tree-node"},[e("span",[l.spaceName+l.varName])]):e("span",{class:"custom-tree-node"},[e("span",[l.spaceName+l.varName]),e("span",[e("el-button",{attrs:{size:"mini",type:"text"},class:"custom-tree-node-remove-btn",style:"position: absolute;right:52px;",on:{click:function(){return a.remove(n,l)}}},["删除"])])])},remove:function(e,t){var a=this,n=e.parent,l=n.data.children||n.data,i=l.findIndex((function(e){return e.id===t.varId}));l.splice(i,1),this.isSelectList.map((function(e){e.id===t.spaceId&&a.loadNode(e.node,e.resolve)}))},handleNodeClickDevice:function(e,t,a){var n=this;this.NodeObjDevice=e,t.data.icon?this.rawDetails="":(this.treeClickCount+=1,setTimeout((function(){2===n.treeClickCount&&(n.treeClickCount=0,n.relation(t)),n.treeClickCount=0}),300))},relation:function(e){this.ltxjData.push({spaceName:e.parent.data.name,spaceId:e.parent.data.id,varName:e.data.name,varId:e.data.id,rawVarId:e.data.rawId,stepTime:e.data.stepTime,cameraType:e.data.nodeType}),this.$set(this.NodeObjDevice,"isSelect",!0)},loadNode:function(e,t){var a=this;0===e.level?i["a"].nodeGetById(this.deviceId).then((function(e){var n=a.hasChild([e.data]);return t(n)})):this.$nextTick((function(){i["a"].getCameraPointType({id:e.data.id,nodeTypeList:["assistance_camera_speed","assistance_camera_yuntai"]}).then((function(n){var l=n.data.spaceDgtVos||[],i=n.data.spaceAnalogVos||[],o=n.data.spaceVoList||[],s=l.concat(i).concat(o),r=a.hasChild(s);return a.ltxjData.map((function(e){r.map((function(t){return e.varId===t.id&&(t.isSelect=!0),t}))})),e.childNodes=null,e.data.children=null,a.isSelectList.push({node:e,resolve:t,id:e.data.id}),t(r)})).finally((function(){a.loading=!1}))}))},hasChild:function(e){return e&&0!==e.length?(e.forEach((function(t,a){e[a].leaf=!e[a].hasChild})),e):[]},comfirmDialog:function(){this.apiFun()},apiFun:function(){this.visible=!1}}},p=u,v=(a("747e"),a("2877")),b=Object(v["a"])(p,n,l,!1,null,"4a636cae",null);t["default"]=b.exports},faff:function(e,t,a){}}]);