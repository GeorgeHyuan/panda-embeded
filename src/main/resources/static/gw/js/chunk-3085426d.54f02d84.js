(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3085426d"],{"5f85":function(e,t,n){"use strict";n("778b")},6708:function(e,t,n){"use strict";n("7fa3")},"778b":function(e,t,n){},"7fa3":function(e,t,n){},"8d81":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("d2-card",{staticClass:"box-card map-tree-page",attrs:{showRightBtn:!1}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"f-color"},[e._v("站所列表")])]),n("el-select",{staticStyle:{"background-color":"#000",color:"#fff"},attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.remoteMethod,loading:e.loadingSearch},on:{change:e.valueChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1),n("div",{staticClass:"tree-box"},[n("el-tree",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",staticStyle:{background:"#000",color:"#6D0"},attrs:{load:e.loadNode,props:e.defaultProps,lazy:"","node-key":"id","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 1)","default-expand-all":!1,"expand-on-click-node":!1,"render-content":e.renderContent,"highlight-current":!0},on:{"node-click":e.handleNodeClick}},"el-tree",e.$attrs,!1))],1)],1)},i=[],r=n("8610"),o=n("2934"),l={data:function(){return{value:"",options:[],loadingSearch:!1,loading:!0,defaultProps:{children:"children",label:"name",id:"id",isLeaf:"leaf"},MouseEvent:null,Node:{},Nodes:null,node:null,resolve:null}},methods:{attention:function(e){var t=this,n={name:e,nodeTypeParent:"station"};this.options=[],o["a"].getSpaceByParam({data:n}).then((function(e){e.data&&(t.options=e.data||[])}))},valueChange:function(e){var t=this;if(!e||""===e)return this.options=[],!1;var n={stationName:e};o["a"].getStationByName({data:n}).then((function(e){e.data&&e.data.length&&e.data.map((function(e){"region"===e.type&&t.treeClick(e)}))}))},remoteMethod:function(e){""!==e?this.attention(e):this.options=[]},handleNodeClick:function(e,t,n){var a=this.$route.meta.clickAll;if("station"===e.remark||a)this.Node=e,this.Nodes=t,this.MouseEvent=n.$el.childNodes[0].childNodes[0],e.treetype=this.treeType||"12",this.$store.dispatch("d2admin/tree/setTreeNode",e),this.$store.dispatch("d2admin/tree/setTitleName",e.name),this.$store.dispatch("d2admin/tree/setTreeType","1"),e.lng&&e.lat&&this.$emit("clickTree",e);else{if(!this.Node)return t.isCurrent=!1,!1;var i=this.Node.id;this.$refs.tree.setCurrentKey(i);var r=this.$refs.tree.getCurrentNode();this.Node=r}},renderContent:function(e,t){var n=t.node,a=t.data;t.store;return e("span",{class:"custom-tree-node",attrs:{id:"node"+a.id}},[e("span",[e("i",{class:"treeIcon "+a.icon}),n.label])])},treeClick:function(e){var t=this,n="100000,"+e.regionPath+","+e.stationId;this.pathArr=n.split(","),this.pathArrLength=this.pathArr.length,this.pathArrActiveNum=0,this.setInterval10=setInterval((function(){t.$nextTick((function(){t.pathArrLength>0&&t.treeClickSetTime()}))}),100)},treeClickSetTime:function(){if(this.pathArrActiveNum>this.pathArrLength-1)return clearInterval(this.setInterval10),!1;var e=document.getElementById("node"+this.pathArr[this.pathArrActiveNum]);if(e){if(this.pathArrActiveNum>this.pathArrLength-2)return e.click(),clearInterval(this.setInterval10),!1;e.parentNode.getElementsByClassName("expanded").length||e.parentNode.getElementsByClassName("el-tree-node__expand-icon")[0].click(),this.pathArrActiveNum=this.pathArrActiveNum+1}},treeApi:function(e){var t={data:{}},n=null;return n=e?0===e.level?0:e.data.id:null,t.data={parentId:n,nodeType:"",type:this.$route.name||""},t},loadNode:function(e,t,n){var a=this;if(0===e.level)setTimeout((function(){a.node=e;var n=a.treeApi(e).data;a.node.childNodes=[],a.loading=!0,r["a"].getLazyRegionTree(n).then((function(n){var i=a.hasChild(n.data);return e=a.node.childNodes=[],t(i)})).then((function(){})).finally((function(){a.loading=!1}))}),0);else{var i=this.treeApi(e).data;this.$nextTick((function(){r["a"].getLazyRegionTree(i).then((function(n){var i=a.hasChild(n.data);return e.childNodes=null,e.data.children=null,t(i)})).finally((function(){a.loading=!1}))}))}},hasChild:function(e){return e&&0!==e.length?(e.forEach((function(t,n){e[n].leaf=!e[n].hasChild})),e):[]}}},s=l,d=(n("5f85"),n("6708"),n("2877")),c=Object(d["a"])(s,a,i,!1,null,"17f1d3de",null);t["default"]=c.exports}}]);